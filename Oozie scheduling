<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Hue 
 
    - Workflow Editor
</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="http://quickstart.cloudera:8888/static/desktop/art/favicon.2351422f4956.ico">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <link href="Oozie%20scheduling_files/bootplus.css" rel="stylesheet">
  <link href="Oozie%20scheduling_files/font-awesome.css" rel="stylesheet">
  <link href="Oozie%20scheduling_files/hue3.css" rel="stylesheet">
  <link href="Oozie%20scheduling_files/fileuploader.css" rel="stylesheet">

  <style type="text/css">
      body {
        display: none;
        visibility: hidden;
        padding-top: 40px;
      }
  </style>

  <script src="Oozie%20scheduling_files/ga.js" async="" type="text/javascript"></script><script type="text/javascript" charset="utf-8">

    // jHue plugins global configuration
    jHueFileChooserGlobals = {
      labels: {
        BACK: "Back",
        SELECT_FOLDER: "Select this folder",
        CREATE_FOLDER: "Create folder",
        FOLDER_NAME: "Folder name",
        CANCEL: "Cancel",
        FILE_NOT_FOUND: "The file has not been found",
        UPLOAD_FILE: "Upload a file",
        FAILED: "Failed"
      },
      user: "cloudera"
    };

    jHueHdfsTreeGlobals = {
      labels: {
        CREATE_FOLDER: "Create folder",
        FOLDER_NAME: "Folder name",
        CANCEL: "Cancel"
      }
    };

    jHueTableExtenderGlobals = {
      labels: {
        GO_TO_COLUMN: "Go to column:",
        PLACEHOLDER: "column name..."
      }
    };

    jHueTourGlobals = {
      labels: {
        AVAILABLE_TOURS: "Available tours",
        NO_AVAILABLE_TOURS: "None for this page.",
        MORE_INFO: "Read more about it...",
        TOOLTIP_TITLE: "Demo tutorials"
      }
    };

  </script>

  <!--[if lt IE 9]>
  <script type="text/javascript">
    if (document.documentMode && document.documentMode < 9){
      location.href = "/boohoo";
    }
  </script>
  <![endif]-->

  <script type="text/javascript">
    // check if it's a Firefox < 7
    var _UA = navigator.userAgent.toLowerCase();
    for (var i = 1; i < 7; i++) {
      if (_UA.indexOf("firefox/" + i + ".") > -1) {
        location.href = "/boohoo";
      }
    }

    // check for IE document modes
    if (document.documentMode && document.documentMode < 9){
      location.href = "/boohoo";
    }
  </script>

  <script src="Oozie%20scheduling_files/hue.js"></script>
  <script src="Oozie%20scheduling_files/jquery-2.js"></script>
  <script src="Oozie%20scheduling_files/jquery_005.js"></script>
  <script src="Oozie%20scheduling_files/jquery_013.js"></script>
  <script src="Oozie%20scheduling_files/jquery_007.js"></script>
  <script src="Oozie%20scheduling_files/jquery_010.js"></script>
  <script src="Oozie%20scheduling_files/jquery_006.js"></script>
  <script src="Oozie%20scheduling_files/jquery_015.js"></script>
  <script src="Oozie%20scheduling_files/jquery_003.js"></script>
  <script src="Oozie%20scheduling_files/jquery_002.js"></script>
  <script src="Oozie%20scheduling_files/jquery_012.js"></script>
  <script src="Oozie%20scheduling_files/jquery.js"></script>
  <script src="Oozie%20scheduling_files/jquery_016.js"></script>
  <script src="Oozie%20scheduling_files/jquery_009.js"></script>
  <script src="Oozie%20scheduling_files/jquery_004.js"></script>
  <script src="Oozie%20scheduling_files/jquery_008.js"></script>
  <script src="Oozie%20scheduling_files/jquery_011.js"></script>
  <script src="Oozie%20scheduling_files/jquery_014.js"></script>
  <script src="Oozie%20scheduling_files/bootstrap.js"></script>
  <script src="Oozie%20scheduling_files/bootstrap-better-typeahead.js"></script>
  <script src="Oozie%20scheduling_files/fileuploader.js"></script>
  <script src="Oozie%20scheduling_files/popover-extra-placements.js"></script>

  <script type="text/javascript" charset="utf-8">

    //Add CSRF Token to all XHR Requests
    var csrftoken = $.cookie('csrftoken');
    function csrfSafeMethod(method) {
      // these HTTP methods do not require CSRF protection
      return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    var xrhsend = XMLHttpRequest.prototype.send;
    XMLHttpRequest.prototype.send = function (data) {
      this.setRequestHeader('X-CSRFToken', csrftoken);
      return xrhsend.apply(this, arguments);
    }

    $(document).ready(function () {
      // forces IE's ajax calls not to cache
      if ($.browser.msie) {
        $.ajaxSetup({ cache: false });
      }


      // prevents framebusting and clickjacking
      if (self == top){
        $("body").css({
          'display': 'block',
          'visibility': 'visible'
        });
      }
      else {
        top.location = self.location;
      }

      $("input, textarea").placeholder();
      $(".submitter").keydown(function (e) {
        if (e.keyCode == 13) {
          $(this).closest("form").submit();
        }
      }).change(function () {
          $(this).closest("form").submit();
      });

      $(".navbar .nav-tooltip").tooltip({
        delay: 0,
        placement: "bottom"
      });

      $("[rel='tooltip']").tooltip({
        delay: 0,
        placement: "bottom"
      });

      $("[rel='navigator-tooltip']").tooltip({
        delay: 0,
        placement: "bottom"
      });

      var JB_CHECK_INTERVAL_IN_MILLIS = 30000;
      window.setTimeout(checkJobBrowserStatus, 10);

      function checkJobBrowserStatus(){
        $.getJSON("/jobbrowser/?format=json&state=running&user=cloudera", function(data){
          if (data != null && data.jobs != null){
            if (data.jobs.length > 0){
              $("#jobBrowserCount").removeClass("hide").text(data.jobs.length);
            }
            else {
              $("#jobBrowserCount").addClass("hide");
            }
          }
          window.setTimeout(checkJobBrowserStatus, JB_CHECK_INTERVAL_IN_MILLIS);
        }).fail(function () {
          window.clearTimeout(checkJobBrowserStatus);
        });
      }

      function openDropdown(which, timeout){
        var _this = which;
        var _timeout = timeout!=null?timeout:800;
        if ($(".navigator").find("ul.dropdown-menu:visible").length > 0) {
          _timeout = 10;
        }
        window.clearTimeout(closeTimeout);
        openTimeout = window.setTimeout(function () {
          $(".navigator li.open").removeClass("open");
          $(".navigator ul.dropdown-menu").hide();
          $("[rel='navigator-tooltip']").tooltip("hide");
          _this.find("ul.dropdown-menu:eq(0)").show();
        }, _timeout);
      }

      var openTimeout, closeTimeout;
      $(".navigator ul.nav li.dropdown").on("click", function(){
        openDropdown($(this), 10);
      });
      $(".navigator ul.nav li.dropdown").hover(function () {
        openDropdown($(this));
      },
      function () {
        var _this = $(this);
        window.clearTimeout(openTimeout);
        closeTimeout = window.setTimeout(function () {
          $(".navigator li.open").removeClass("open");
          $(".navigator li a:focus").blur();
          $(".navigator").find("ul.dropdown-menu").hide();
        }, 1000);
      });

      function showSubmenu(menuElement) {
        $(".tooltip").remove();
        menuElement.data("lastShown", (new Date()).getTime())
        menuElement.show();
      }

      $(".navigator ul.nav li.dropdown-submenu a").on("mouseenter", function () {
        showSubmenu($(this).siblings(".dropdown-menu"));
      });

      $(".navigator ul.nav li.dropdown-submenu a img").on("mouseenter", function () {
        showSubmenu($(this).parent().siblings(".dropdown-menu"));
      });

      $(".navigator ul.nav li.dropdown-submenu").on("mouseenter", function () {
        $(this).siblings().find(".dropdown-menu").hide();
        showSubmenu($(this).find(".dropdown-menu"));
      });

      $(".navigator ul.nav li.dropdown-submenu").on("mouseleave", function () {
        var _lastShown = $(this).find(".dropdown-menu").data("lastShown");
        if (_lastShown == null || (new Date()).getTime() - _lastShown > 300) {
          var _el = $(this);
          window.setTimeout(function () {
            _el.find(".dropdown-menu").hide();
          }, 50);
        }
      });

      var _skew = -1;
      $("[data-hover]").on("mouseover", function(){
        var _this = $(this);
        _skew = window.setTimeout(function(){
          _this.attr("src", _this.data("hover"));
        }, 3000);
      });

      $("[data-hover]").on("mouseout", function(){
        $(this).attr("src", $(this).data("orig"));
        window.clearTimeout(_skew);
      });
    });
  </script>
</head>
<body jhuescrollified="true" style="display: block; visibility: visible;">




<div class="navigator">
  <div class="pull-right">

  <ul class="nav nav-pills">
    <li class="divider-vertical"></li>
    <li><a data-original-title="Manage HDFS" rel="navigator-tooltip" href="http://quickstart.cloudera:8888/filebrowser"><i class="fa fa-file"></i><span class="hideable">&nbsp;File Browser&nbsp;</span></a></li>
    <li><a data-original-title="Manage jobs" rel="navigator-tooltip" href="http://quickstart.cloudera:8888/jobbrowser"><i class="fa fa-list-alt"></i><span class="hideable">&nbsp;Job Browser&nbsp;</span><span id="jobBrowserCount" class="badge badge-warning hide" style="padding-top:0;padding-bottom: 0"></span></a></li>
    <li class="dropdown">
      <a data-original-title="Administration" rel="navigator-tooltip" href="http://quickstart.cloudera:8888/oozie/editor/workflow/edit/index.html#" data-toggle="dropdown" class="dropdown-toggle"><i class="fa fa-cogs"></i>&nbsp;<span class="hideable">cloudera&nbsp;</span><b class="caret"></b></a>
      <ul style="display: none;" class="dropdown-menu">
        <li><a href="http://quickstart.cloudera:8888/useradmin/users/edit/cloudera"><i class="fa fa-key"></i>&nbsp;&nbsp;Edit Profile</a></li>
          <li><a href="http://quickstart.cloudera:8888/useradmin/users"><i class="fa fa-group"></i>&nbsp;&nbsp;Manage Users</a></li>
      </ul>
    </li>
    <li><a data-original-title="Documentation" rel="navigator-tooltip" href="http://quickstart.cloudera:8888/help"><i class="fa fa-question-circle"></i></a></li>
    <li id="jHueTourFlagPlaceholder"><a data-original-title="" id="jHueTourFlag"><i class="fa fa-flag-checkered" style=""></i></a></li>
    <li><a data-original-title="Sign out" rel="navigator-tooltip" href="http://quickstart.cloudera:8888/accounts/logout/"><i class="fa fa-sign-out"></i></a></li>
  </ul>

  </div>
    <a data-original-title="About Hue" class="brand nav-tooltip pull-left" rel="navigator-tooltip" href="http://quickstart.cloudera:8888/about"><img src="Oozie%20scheduling_files/hue-logo-mini-white.png" data-orig="/static/desktop/art/hue-logo-mini-white.401b713061ff.png" data-hover="/static/desktop/art/hue-logo-mini-white-hover.8a3db3a91e3c.png"></a>
     <ul class="nav nav-pills pull-left">
       <li><a data-original-title="My documents" rel="navigator-tooltip" href="http://quickstart.cloudera:8888/home" style="padding-bottom:2px!important"><i class="fa fa-home" style="font-size: 19px"></i></a></li>
       
       <li class="dropdown">
         <a data-original-title="Query data" rel="navigator-tooltip" href="#" data-toggle="dropdown" class="dropdown-toggle">Query Editors <b class="caret"></b></a>
         <ul style="display: none;" role="menu" class="dropdown-menu">
             <li><a href="http://quickstart.cloudera:8888/beeswax"><img src="Oozie%20scheduling_files/icon_beeswax_48_002.png" class="app-icon"> Hive</a></li>
             <li><a href="http://quickstart.cloudera:8888/impala"><img src="Oozie%20scheduling_files/icon_impala_48.png" class="app-icon"> Impala</a></li>
            <li><a href="http://quickstart.cloudera:8888/rdbms"><img src="Oozie%20scheduling_files/icon_rdbms_48.png" class="app-icon"> DB Query</a></li>
             <li><a href="http://quickstart.cloudera:8888/pig"><img src="Oozie%20scheduling_files/icon_pig_48_002.png" class="app-icon"> Pig</a></li>
             <li><a href="http://quickstart.cloudera:8888/jobsub"><img src="Oozie%20scheduling_files/icon_jobsub_48.png" class="app-icon"> Job Designer</a></li>
         </ul>
       </li>
       
       <li class="dropdown">
         <a data-original-title="Manage data" rel="navigator-tooltip" href="#" data-toggle="dropdown" class="dropdown-toggle">Data Browsers <b class="caret"></b></a>
         <ul style="display: none;" role="menu" class="dropdown-menu">
             <li><a href="http://quickstart.cloudera:8888/metastore"><img src="Oozie%20scheduling_files/icon_metastore_48.png" class="app-icon"> Metastore Tables</a></li>
             <li><a href="http://quickstart.cloudera:8888/hbase"><img src="Oozie%20scheduling_files/icon_hbase_48.png" class="app-icon"> HBase</a></li>
             <li><a href="http://quickstart.cloudera:8888/sqoop"><img src="Oozie%20scheduling_files/icon_sqoop_48_002.png" class="app-icon"> Sqoop Transfer</a></li>
         </ul>
       </li>
       <li class="dropdown">
         <a data-original-title="Schedule with Oozie" rel="navigator-tooltip" href="#" data-toggle="dropdown" class="dropdown-toggle">Workflows <b class="caret"></b></a>
         <ul style="display: none;" role="menu" class="dropdown-menu">
           <li class="dropdown-submenu">
             <a href="http://quickstart.cloudera:8888/oozie/"><img src="Oozie%20scheduling_files/icon_oozie_dashboard_48.png" class="app-icon"> Dashboards</a>
             <ul style="display: none;" class="dropdown-menu">
               <li><a href="http://quickstart.cloudera:8888/oozie/list_oozie_workflows/"><img src="Oozie%20scheduling_files/icon_oozie_workflow_48.png" class="app-icon"> Workflows</a></li>
               <li><a href="http://quickstart.cloudera:8888/oozie/list_oozie_coordinators/"><img src="Oozie%20scheduling_files/icon_oozie_coordinator_48.png" class="app-icon"> Coordinators</a></li>
               <li><a href="http://quickstart.cloudera:8888/oozie/list_oozie_bundles/"><img src="Oozie%20scheduling_files/icon_oozie_bundle_48.png" class="app-icon"> Bundles</a></li>
             </ul>
           </li>
           
           <li class="dropdown-submenu">
             <a href="http://quickstart.cloudera:8888/oozie/editor/workflow/list/"><img src="Oozie%20scheduling_files/icon_oozie_editor_48.png" class="app-icon"> Editors</a>
             <ul style="display: none;" class="dropdown-menu">
               <li><a href="http://quickstart.cloudera:8888/oozie/editor/workflow/list/"><img src="Oozie%20scheduling_files/icon_oozie_workflow_48.png" class="app-icon"> Workflows</a></li>
               <li><a href="http://quickstart.cloudera:8888/oozie/editor/coordinator/list/"><img src="Oozie%20scheduling_files/icon_oozie_coordinator_48.png" class="app-icon"> Coordinators</a></li>
               <li><a href="http://quickstart.cloudera:8888/oozie/editor/bundle/list/"><img src="Oozie%20scheduling_files/icon_oozie_bundle_48.png" class="app-icon"> Bundles</a></li>
             </ul>
           </li>
         </ul>
       </li>
         
         
           <li>
             <a data-original-title="Solr Search" rel="navigator-tooltip" href="http://quickstart.cloudera:8888/search/">Search</a>
           </li>
         <li class="dropdown">
           <a data-original-title="Hadoop Security" rel="navigator-tooltip" href="#" data-toggle="dropdown" class="dropdown-toggle">Security <b class="caret"></b></a>
           <ul style="display: none;" role="menu" class="dropdown-menu">
             <li><a href="http://quickstart.cloudera:8888/security/hive">&nbsp;<i class="fa fa-database"></i>&nbsp;&nbsp;Sentry Tables</a></li>
             <li><a href="http://quickstart.cloudera:8888/security/hdfs">&nbsp;<i class="fa fa-file"></i>&nbsp;&nbsp;File ACLs</a></li>
           </ul>
         </li>
     </ul>

</div>


<div id="jHueNotify" class="alert hide">
    <button class="close">Ã—</button>
    <span class="message"></span>
</div>


<div id="editor">




    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            
  <div class="pull-right" style="padding-right: 10px">

    <div data-bind="visible: workflow.isDirty() || workflow.id() == null" class="pull-left muted" style="padding-top: 12px; padding-right: 8px; display: none;">
      Unsaved
    </div>

    <a data-original-title="Edit" class="btn btn-inverse" rel="tooltip" data-placement="bottom" data-bind="click: toggleEditing, css: {'btn': true, 'btn-inverse': isEditing}, visible: canEdit">
      <i class="fa fa-fw fa-pencil"></i>
    </a>

    &nbsp;&nbsp;&nbsp;

    <a data-original-title="Submit" class="btn" rel="tooltip" data-placement="bottom" data-bind="click: showSubmitPopup, css: {'btn': true, 'disabled': workflow.isDirty()}, visible: workflow.id() != null">
      <i class="fa fa-fw fa-play"></i>
    </a>
    <a data-original-title="Schedule" class="btn" rel="tooltip" data-placement="bottom" data-bind="click: schedule, css: {'btn': true, 'disabled': workflow.isDirty()}, visible: workflow.id() != null">
      <i class="fa fa-fw fa-calendar"></i>
    </a>

    &nbsp;&nbsp;&nbsp;

    <a data-original-title="Settings" class="btn" rel="tooltip" data-placement="bottom" data-toggle="modal" data-target="#settingsModal" data-bind="css: {'btn': true}, visible: canEdit">
      <i class="fa fa-fw fa-cog"></i>
    </a>

    <a href="http://quickstart.cloudera:8888/filebrowser/view/user/hue/oozie/workspaces/hue-oozie-1460739072.7" class="btn" target="_blank" rel="tooltip" data-placement="right" data-original-title="Workspace" data-bind="css: {'btn': true}, attr: { href: '/filebrowser/view' + $root.workflow.properties.deployment_dir() }">
      <i class="fa fa-fw fa-folder-open"></i>
    </a>

    &nbsp;&nbsp;&nbsp;

    <a data-original-title="Save" class="btn" rel="tooltip" data-placement="bottom" data-loading-text="Saving..." data-bind="click: $root.save, css: {'btn': true, 'disabled': $root.isSaving()}, visible: canEdit">
      <i class="fa fa-fw fa-save"></i>
    </a>

    <a data-original-title="Share " class="share-link btn" rel="tooltip" data-placement="bottom" data-bind="click: openShareModal,
        attr: {'data-original-title': 'Share ' + name},
        css: {'isShared': isShared(), 'btn': true},
        visible: workflow.id() != null &amp;&amp; canEdit()">
      <i class="fa fa-users"></i>
    </a>

    &nbsp;&nbsp;&nbsp;

    <a data-original-title="New" class="btn" href="http://quickstart.cloudera:8888/oozie/editor/workflow/new/" rel="tooltip" data-placement="bottom" data-bind="css: {'btn': true}">
      <i class="fa fa-fw fa-file-o"></i>
    </a>

  </div>

          <div class="nav-collapse">
            <ul class="nav">
              <li class="currentApp">
                

                <a title="Switch to the dashboard" href="http://quickstart.cloudera:8888/oozie/list_oozie_workflows/">
                  <img src="Oozie%20scheduling_files/icon_oozie_editor_48.png" class="app-icon"> Oozie Editor
                </a>
               </li>
                  <li class="
  active"><a href="http://quickstart.cloudera:8888/oozie/editor/workflow/list/">Workflows</a></li>
                  <li class="
  "><a href="http://quickstart.cloudera:8888/oozie/editor/coordinator/list/">Coordinators</a></li>
                  <li class="
  "><a href="http://quickstart.cloudera:8888/oozie/editor/bundle/list/">Bundles</a></li>
            </ul>
          </div>
        </div>
      </div>
  </div>


<style type="text/css">
  body {
    background-color: #FFFFFF;
  }
</style>

<script type="text/javascript">
  if (window.location.hash != "") {
    if (window.location.hash.indexOf("workflow") > -1) {
      location.href = "/oozie/editor/workflow/edit/?" + window.location.hash.substr(1).replace(/(<([^>]+)>)/ig, "");
    }
  }
</script>





<div style="display: block;" class="card card-toolbar" data-bind="slideVisible: isEditing">
  <div style="float: left; margin-left: 20px;" data-bind="visible: columns().length &gt; 0">
      <div class="toolbar-label">ACTIONS</div>
    
    <div data-original-title="Hive Script" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableHiveAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableHiveAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><img src="Oozie%20scheduling_files/icon_beeswax_48.png" class="app-icon"></a>
    </div>

    <div data-original-title="HiveServer2 Script" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableHive2Action(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableHive2Action());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><img src="Oozie%20scheduling_files/icon_beeswax_48.png" class="app-icon"><sup style="color: #338bb8; margin-left: -4px; top: -14px; font-size: 12px">2</sup></a>
    </div>

    <div data-original-title="Pig Script" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true},
                    draggable: {data: draggablePigAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggablePigAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><img src="Oozie%20scheduling_files/icon_pig_48.png" class="app-icon"></a>
    </div>

    <div data-original-title="Spark program" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableSparkAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableSparkAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><img src="Oozie%20scheduling_files/icon_spark_48.png" class="app-icon"></a>
    </div>

    <div data-original-title="Java program" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableJavaAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableJavaAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-file-code-o"></i></a>
    </div>

    <div data-original-title="Sqoop 1" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableSqoopAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableSqoopAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><img src="Oozie%20scheduling_files/icon_sqoop_48.png" class="app-icon"></a>
    </div>

    <div data-original-title="MapReduce job" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableMapReduceAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableMapReduceAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-file-archive-o"></i></a>
    </div>

    <div data-original-title="Sub workflow" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableSubworkflowAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableSubworkflowAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-code-fork"></i></a>
    </div>

    <div data-original-title="Shell" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableShellAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableShellAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-terminal"></i></a>
    </div>

    <div data-original-title="Ssh" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableSshAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableSshAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-tty"></i></a>
    </div>

    <div data-original-title="HDFS Fs" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableFsAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableFsAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-file-o"></i></a>
    </div>

    <div data-original-title="Email" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableEmailAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableEmailAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-envelope-o"></i></a>
    </div>

    <div data-original-title="Streaming" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableStreamingAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableStreamingAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-exchange"></i></a>
    </div>

    <div data-original-title="Distcp" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableDistCpAction(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableDistCpAction());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-files-o"></i></a>
    </div>

    <div data-original-title="Kill" aria-disabled="false" class="draggable-widget ui-draggable" data-bind="css: { 'draggable-widget': true },
                    draggable: {data: draggableKillNode(), isEnabled: true,
                    options: {'refreshPositions': true, 'stop': function(){ $root.isDragging(false); }, 'start': function(event, ui){ $root.isDragging(true); $root.currentlyDraggedWidget(draggableKillNode());}}}" rel="tooltip" data-placement="top">
         <a class="draggable-icon"><i class="fa fa-stop"></i></a>
    </div>

  </div>
  <div class="clearfix"></div>
</div>




  <div class="container-fluid">
  <div class="row-fluid">
    <div style="margin-top: 120px;" class="span12" data-bind="style:{'marginTop' : $root.isEditing() ? '120px': '50px'}">
    <div class="object-name" style="text-align: center">
      <span class="editable editable-click" data-bind="editable: $root.workflow.name, editableOptions: {enabled: $root.isEditing(), placement: 'right'}">My Workflow</span>
    </div>
    <div class="object-description" style="text-align: center; margin-top: 10px">
      <span class="editable editable-click editable-empty" data-bind="editable: $root.workflow.properties.description, editableOptions: {enabled: $root.isEditing(), placement: 'right', emptytext: 'Add a description...'}">Add a description...</span>
    </div>
    </div>
  </div>
</div>






<div class="dashboard" data-bind="css: {'dashboard': true, 'readonly': ! isEditing()}">
  <!-- ko if: $root.workflow.properties.imported --><!-- /ko -->
  <div class="container-fluid">
    <div class="row-fluid" data-bind="template: { name: 'column-template', foreach: oozieColumns}">
  <div class="card card-home card-column span12" data-bind="css: klass()" style="min-height: 50px !important;">
    <div data-bind="template: { name: 'row-template', data: oozieStartRow }" style="margin-top: 0">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span4 offset4">
        <div class="row-fluid row-container ui-sortable ui-sortable-disabled is-editing" data-bind="css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing},
          sortable: { template: 'widget-template', data: widgets, allowDrop: $root.isEditing() &amp;&amp; widgets().length &lt; 1, isEnabled: $root.isEditing() &amp;&amp; widgets().length &lt; 1,
          options: {'opacity': 0.7, 'placeholder': 'row-highlight', 'greedy': true,
              'stop': function(event, ui){},
              'helper': function(event){lastWindowScrollPosition = $(window).scrollTop(); var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.toElement).text());_title.appendTo(_par);_par.height(80);_par.width(180);return _par;}},
              dragged: function(widget){widgetDraggedAdditionalHandler(widget)}}">
  <div aria-disabled="false" class="card card-widget span12 ui-draggable" id="wdg_3f107997-04cc-8733-60a9-a4bb62cebffc" data-bind="attr: {'id': 'wdg_'+ id(),}, css: klass() + (ooziePropertiesExpanded()?' expanded-widget':'') + ($root.isRunning() &amp;&amp; status() == ''?' widget-running':''),
      draggable: {data: $data, isEnabled: true, options: {'handle': '.move-widget', 'opacity': 0.7, 'refreshPositions': true, 'start': function(event, ui){ $root.setCurrentlyDraggedWidget($data, event.toElement || event.originalEvent.originalEvent.target); $root.isDragging(true); if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', -$(window).scrollTop() ); } }, 'beforestop': function (event, ui) { if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', 0 ); } }, 'stop': function(event, ui){ $root.enableSideDrop($data); $root.isDragging(false); }, 'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.currentTarget).find('h2 a.pointer').text());_title.appendTo(_par);_par.css('minHeight', '10px');_par.css('overflow', 'hidden');_par.width(180);return _par;}}}">
    <h2 style="display: none;" class="card-heading simple" data-bind="visible: widgetType() != 'start-widget' &amp;&amp; widgetType() != 'end-widget' &amp;&amp;
        id() != '17c9c895-5a16-7443-bb81-f34b30b21548' &amp;&amp; (['fork-widget', 'join-widget', 'decision-widget'].indexOf(widgetType()) == -1 || $root.isEditing())">

      <span style="display: none;" data-bind="visible: $root.isEditing() &amp;&amp; oozieMovable() &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; ($root.newAction() == null || $root.newAction().id() != id())">
        <a href="javascript:void(0)" class="move-widget" title="Move node"><i class="fa fa-arrows"></i></a>
        &nbsp;
        <a href="javascript:void(0)" class="move-widget clone-widget" title="Copy node"><i class="fa fa-copy"></i></a>
        &nbsp;
      </span>

      <!-- ko if: widgetType() == 'hive-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'hive2-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'pig-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'java-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'sqoop-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'mapreduce-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'subworkflow-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'shell-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'ssh-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'fs-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'email-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'streaming-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'distcp-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'spark-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'kill-widget' --><!-- /ko -->

      <span title="3f10" class="editable editable-click" data-bind="visible: typeof $root.isViewer == 'undefined' || ! $root.isViewer(), editable: name, editableOptions: {enabled: $root.isEditing(), placement: 'right'}, attr: {'title': id().slice(0, 4)}">Start</span>
      <a style="display: none;" class="pointer" data-bind="visible: typeof $root.isViewer != 'undefined' &amp;&amp; $root.isViewer(), click: function(){ location.href = actionURL(); }, text: name" title="View workflow action">Start</a>

      <!-- ko if: widgetType() == 'decision-widget' --><!-- /ko -->
      <!-- ko if: widgetType() != 'decision-widget' -->
        <div style="display: none;" class="inline pull-right" data-bind="visible: $root.isEditing() &amp;&amp; (['start-widget', 'end-widget', 'fork-widget', 'join-widget'].indexOf(widgetType()) == -1) &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded()">
          <a href="javascript:void(0)" data-bind="click: function(w){addActionDemiModalFieldCancel();$root.removeWidget(w);}"><i class="fa fa-times"></i></a>
        </div>
      <!-- /ko -->
      <!-- ko if: ooziePropertiesExpanded() --><!-- /ko -->
    </h2>
    <div class="card-body" style="padding: 0; position: relative">
      <div style="display: none;" class="advanced-triangle-container" data-bind="visible: $root.isEditing() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; oozieMovable(), click: toggleProperties">
        <div class="advanced-triangle">
          <a href="javascript:void(0)"><i class="fa fa-cogs"></i></a>
        </div>
      </div>
      <!-- ko if: id() == '17c9c895-5a16-7443-bb81-f34b30b21548' && ooziePropertiesExpanded() --><!-- /ko -->
      <div data-bind="template: { name: function() { return widgetType(); }}" class="widget-main-section">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="min-height: 40px;">
    <div class="big-icon" title="It is where we start!"><i class="fa fa-flag-o"></i></div>
  </div>
  <!-- /ko -->
</div>
      <div style="width: 0%;" class="widget-statusbar" data-bind="css: {'widget-statusbar': true, 'widget-statusbar-running': status() == 'running', 'widget-statusbar-failed': status() == 'failed', 'widget-statusbar-success': status() == 'success'}, style: {'width': progress() + '%'}"></div>
    </div>
  </div>
</div>
      </div>
    </div>
  </div>
</div>
    <div style="" class="container-fluid" data-bind="visible: $root.isEditing() &amp;&amp; oozieRows().length &gt; 0">
      <div class="row-fluid">
        <div class="span4 offset4 drop-target ui-droppable is-editing" data-bind="visible: enableOozieDropOnBefore, css: {'span4 offset4': true, 'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(x, y){ var _w = $root.addDraggedWidget($data, true); widgetDraggedAdditionalHandler(_w); } }"></div>
        <div class="drop-target drop-target-disabled is-editing" style="display: none;" data-bind="visible: ! enableOozieDropOnBefore(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
      </div>
    </div>
    <div data-bind="template: { name: 'internal-row-template', foreach: oozieRows}">
  <div class="container-fluid">
    <div class="row-fluid" data-bind="visible: $index() &gt; 0 &amp;&amp; $root.isEditing() &amp;&amp; ! $root.isRowBeforeJoin($data) &amp;&amp; ! $root.isRowAfterFork($data)" style="margin-bottom: 10px; display: none;">
      <div class="span1 offset3andhalf" data-bind="css: {'span1': true, 'offset3andhalf': ($root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset4': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}"></div>
      <div class="span4" data-bind="css: {'span10': ($parents.length &gt; 2 || columns().length &gt; 0), 'span4': ($parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset3andhalf': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div class="drop-target drop-target-disabled is-editing" style="display: none;" data-bind="visible: $root.isEditing() &amp;&amp; ! enableOozieDropOnBefore(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
        <div class="drop-target ui-droppable is-editing" style="text-align: left;" data-bind="visible: $root.isEditing() &amp;&amp; enableOozieDropOnBefore(), css: {'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addDraggedWidget($data); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
      <div class="span1" data-bind="css: {'span1': true, 'readonly': ! $root.isEditing()}"></div>
    </div>
    <div style="width: 100%;" class="row-fluid" data-bind="style: {'width': columns().length &lt; 5 ? '100%' : (columns().length * 25)+'%' }">
      <div class="span1 offset3andhalf" data-bind="css: {'span1': true, 'offset3andhalf': ($root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset4': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div class="drop-target drop-target-side ui-droppable is-editing" style="height: 108px;" data-bind="visible: $root.isEditing() &amp;&amp; enableOozieDropOnSide() &amp;&amp; !($data.widgets().length &gt; 0 &amp;&amp; ['join-widget', 'decision-widget'].indexOf($data.widgets()[0].widgetType()) &gt; -1), css: {'drop-target drop-target-side': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addSideDraggedWidget($data, true); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
      <div class="span4" data-bind="css: {'span10': ($parents.length &gt; 2 || columns().length &gt; 0), 'span4': ($parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset3andhalf': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div class="row-fluid row-container ui-sortable ui-sortable-disabled is-editing" data-bind="visible: columns().length == 0, css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing},
          sortable: { template: 'widget-template', data: widgets, allowDrop: enableOozieDrop, isEnabled: enableOozieDrop,
          options: {'opacity': 0.7, 'placeholder': 'row-highlight', 'greedy': true,
              'stop': function(event, ui){},
              'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.toElement).text());_title.appendTo(_par);_par.height(80);_par.width(180);return _par;}},
              dragged: function(widget){widgetDraggedAdditionalHandler(widget)}}">
  <div aria-disabled="false" class="card card-widget span12 ui-draggable" id="wdg_7d0cb7ad-14ab-6076-3043-7b386ac9ef54" data-bind="attr: {'id': 'wdg_'+ id(),}, css: klass() + (ooziePropertiesExpanded()?' expanded-widget':'') + ($root.isRunning() &amp;&amp; status() == ''?' widget-running':''),
      draggable: {data: $data, isEnabled: true, options: {'handle': '.move-widget', 'opacity': 0.7, 'refreshPositions': true, 'start': function(event, ui){ $root.setCurrentlyDraggedWidget($data, event.toElement || event.originalEvent.originalEvent.target); $root.isDragging(true); if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', -$(window).scrollTop() ); } }, 'beforestop': function (event, ui) { if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', 0 ); } }, 'stop': function(event, ui){ $root.enableSideDrop($data); $root.isDragging(false); }, 'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.currentTarget).find('h2 a.pointer').text());_title.appendTo(_par);_par.css('minHeight', '10px');_par.css('overflow', 'hidden');_par.width(180);return _par;}}}">
    <h2 class="card-heading simple" data-bind="visible: widgetType() != 'start-widget' &amp;&amp; widgetType() != 'end-widget' &amp;&amp;
        id() != '17c9c895-5a16-7443-bb81-f34b30b21548' &amp;&amp; (['fork-widget', 'join-widget', 'decision-widget'].indexOf(widgetType()) == -1 || $root.isEditing())">

      <span style="" data-bind="visible: $root.isEditing() &amp;&amp; oozieMovable() &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; ($root.newAction() == null || $root.newAction().id() != id())">
        <a href="javascript:void(0)" class="move-widget" title="Move node"><i class="fa fa-arrows"></i></a>
        &nbsp;
        <a href="javascript:void(0)" class="move-widget clone-widget" title="Copy node"><i class="fa fa-copy"></i></a>
        &nbsp;
      </span>

      <!-- ko if: widgetType() == 'hive-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'hive2-widget' -->
      <img src="Oozie%20scheduling_files/icon_beeswax_48.png" class="widget-icon"><sup style="color: #338bb8; margin-left: -4px">2</sup>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'pig-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'java-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'sqoop-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'mapreduce-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'subworkflow-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'shell-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'ssh-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'fs-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'email-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'streaming-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'distcp-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'spark-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'kill-widget' --><!-- /ko -->

      <span title="7d0c" class="editable editable-click" data-bind="visible: typeof $root.isViewer == 'undefined' || ! $root.isViewer(), editable: name, editableOptions: {enabled: $root.isEditing(), placement: 'right'}, attr: {'title': id().slice(0, 4)}">HiveServer2 Script</span>
      <a style="display: none;" class="pointer" data-bind="visible: typeof $root.isViewer != 'undefined' &amp;&amp; $root.isViewer(), click: function(){ location.href = actionURL(); }, text: name" title="View workflow action">HiveServer2 Script</a>

      <!-- ko if: widgetType() == 'decision-widget' --><!-- /ko -->
      <!-- ko if: widgetType() != 'decision-widget' -->
        <div style="" class="inline pull-right" data-bind="visible: $root.isEditing() &amp;&amp; (['start-widget', 'end-widget', 'fork-widget', 'join-widget'].indexOf(widgetType()) == -1) &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded()">
          <a href="javascript:void(0)" data-bind="click: function(w){addActionDemiModalFieldCancel();$root.removeWidget(w);}"><i class="fa fa-times"></i></a>
        </div>
      <!-- /ko -->
      <!-- ko if: ooziePropertiesExpanded() --><!-- /ko -->
    </h2>
    <div class="card-body" style="padding: 0; position: relative">
      <div style="" class="advanced-triangle-container" data-bind="visible: $root.isEditing() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; oozieMovable(), click: toggleProperties">
        <div class="advanced-triangle">
          <a href="javascript:void(0)"><i class="fa fa-cogs"></i></a>
        </div>
      </div>
      <!-- ko if: id() == '17c9c895-5a16-7443-bb81-f34b30b21548' && ooziePropertiesExpanded() --><!-- /ko -->
      <div data-bind="template: { name: function() { return widgetType(); }}" class="widget-main-section">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">

    <div style="display: none;" data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }">
  <!-- ko if: $parent.logsURL() != '' && $parent.logsURL() != null --><!-- /ko -->
</span>
      <span data-bind="template: { name: &quot;common-fs-link&quot;, data: {path: properties.script_path(), with_label: true} }">
<!-- ko if: $data.path.length > 0 -->
  <!-- ko if: with_label -->
    <a title="Open /user/cloudera/tables_creation.hql" href="http://quickstart.cloudera:8888/filebrowser/view/user/cloudera/tables_creation.hql" data-bind="attr: {href: '/filebrowser/view' + ($data.path.indexOf('/') == -1 ? $root.workflow.properties.deployment_dir() + '/' : '') + $data.path , title: 'Open '+ $data.path }" target="_blank">
      <span data-bind="text: $data.path.lastIndexOf('/') == $data.path.length - 1 ? $data.path : $data.path.split('/').pop()">tables_creation.hql</span>
    </a>
  <!-- /ko -->

   <!-- ko if: ! with_label --><!-- /ko -->
 <!-- /ko -->
</span>
    </div>

    <div style="" data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <input value="/user/cloudera/tables_creation.hql" placeholder="Path to the script on HDFS." data-original-title="/user/cloudera/tables_creation.hql" autocomplete="off" class="filechooser-input" data-bind="filechooser: properties.script_path, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.script_path, attr: { placeholder:  $root.workflow_properties.script_path.help_text }" type="text"><button class="btn fileChooserBtn">..</button>
        <span data-bind="template: { name: &quot;common-fs-link&quot;, data: {path: properties.script_path(), with_label: false}}">
<!-- ko if: $data.path.length > 0 -->
  <!-- ko if: with_label --><!-- /ko -->

   <!-- ko if: ! with_label -->
     <a href="http://quickstart.cloudera:8888/filebrowser/view/user/cloudera/tables_creation.hql" data-bind="attr: {href: '/filebrowser/view' + ($data.path.indexOf('/') == -1 ? $root.workflow.properties.deployment_dir() + '/' : '') + $data.path }" target="_blank" title="Open">
       <i class="fa fa-external-link-square"></i>
     </a>
   <!-- /ko -->
 <!-- /ko -->
</span>

        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-parameters' }">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.parameters.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows')}">
      Parameters <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="foreach: properties.parameters"></ul>
</div>
          <div class="span6" data-bind="template: { name: 'common-properties-files' }">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.files.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows') }">
      Files <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="foreach: properties.files"></ul>
</div>
        </div>
      </div>
    </div>


    <div style="display: none;" data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a href="#properties-7d0cb7ad-14ab-6076-3043-7b386ac9ef54" data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla-7d0cb7ad-14ab-6076-3043-7b386ac9ef54" data-toggle="tab">SLA</a></li>
        <li><a href="#credentials-7d0cb7ad-14ab-6076-3043-7b386ac9ef54" data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a href="#transitions-7d0cb7ad-14ab-6076-3043-7b386ac9ef54" data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div id="properties-7d0cb7ad-14ab-6076-3043-7b386ac9ef54" class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="text: $root.workflow_properties.jdbc_url.label">HiveServer2 URL</span>
          <input placeholder="e.g. jdbc:hive2://localhost:10000/default. JDBC URL for the Hive Server 2." data-bind="value: properties.jdbc_url, attr: { placeholder: $root.workflow_properties.jdbc_url.help_text }" type="text">
          <br>
          <span data-bind="text: $root.workflow_properties.password.label">Password</span>
          <input placeholder="The password element must contain the password of the current user. However, the password is only used if Hive Server 2 is backed by something requiring a password (e.g. LDAP); non-secured Hive Server 2 or Kerberized Hive Server 2 don't require a password." data-bind="value: properties.password, attr: { placeholder: $root.workflow_properties.password.help_text }" type="text">
          <br>
          <span data-bind="template: { name: 'common-action-properties' }">
  <div class="properties">
    <h6>Prepare</h6>
    <ul style="display: none;" data-bind="visible: properties.prepares().length &gt; 0, foreach: properties.prepares" class="unstyled"></ul>
    <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'mkdir', 'value': ''}); $(document).trigger('drawArrows') }">
      Directory <i class="fa fa-plus"></i>
    </a>
    <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'delete', 'value': ''}); $(document).trigger('drawArrows') }">
      Delete <i class="fa fa-plus"></i>
    </a>

    <!-- ko if: properties.job_xml --><!-- /ko -->

    <h6>
      <a class="pointer" data-bind="click: function(){ properties.job_properties.push({'name': '', 'value': ''}); $(document).trigger('drawArrows') }">
        Properties <i class="fa fa-plus"></i>
      </a>
    </h6>
    <ul style="display: none;" data-bind="visible: properties.job_properties().length &gt; 0, foreach: properties.job_properties" class="unstyled"></ul>
    <em data-bind="visible: properties.job_properties().length == 0">No properties defined.</em>

    <!-- ko if: properties.archives -->
    <h6>
      <a class="pointer" data-bind="click: function(){ properties.archives.push(ko.mapping.fromJS({'name': ''})); $(document).trigger('drawArrows') }">
        Archives <i class="fa fa-plus"></i>
      </a>
    </h6>
    <ul style="display: none;" data-bind="visible: properties.archives().length &gt; 0, foreach: properties.archives" class="unstyled"></ul>
    <em data-bind="visible: properties.archives().length == 0">No archives defined.</em>
    <!-- /ko -->
  </div>
</span>
          <br>
          <br>
        </div>

        <div id="sla-7d0cb7ad-14ab-6076-3043-7b386ac9ef54" class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }">
  <div data-bind="with: properties">
     
  <div data-bind="foreach: { 'data': sla, 'afterRender': addSLATextAndPlaceholder }">
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' -->
      <label class="checkbox" style="text-align: left"><span class="control-label">Enable</span> <input placeholder="" data-bind="checked: value" type="checkbox"></label>
      <!-- /ko -->
      <!-- ko if:  key() != 'enabled' --><!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Nominal time *</label>
      <div class="controls">
        <input value="${nominal_time}" placeholder="${nominal_time}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Should start</label>
      <div class="controls">
        <input placeholder="${10 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Should end *</label>
      <div class="controls">
        <input value="${30 * MINUTES}" placeholder="${30 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Max duration</label>
      <div class="controls">
        <input placeholder="${30 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Alert events</label>
      <div class="controls">
        <input placeholder="start_miss,end_miss,duration_miss" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Alert contact</label>
      <div class="controls">
        <input placeholder="joe@example.com,bob@example.com" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Notification message</label>
      <div class="controls">
        <input placeholder="My Job has encountered an SLA event!" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Upstream apps</label>
      <div class="controls">
        <input placeholder="dependent-app-1, dependent-app-2" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  </div>

  </div>
</span>
        </div>

        <div id="credentials-7d0cb7ad-14ab-6076-3043-7b386ac9ef54" class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }">
  <em data-bind="visible: $root.credentials() == null || $root.credentials().length == 0">No available credentials.</em>
  <select style="display: none;" data-bind="visible: $root.credentials() != null &amp;&amp; $root.credentials().length &gt; 0, options: $root.credentials, selectedOptions: properties.credentials" size="5" multiple="true"></select>

  <em style="display: none;" data-bind="visible: properties.credentials &amp;&amp; properties.credentials.indexOf('hbase') != -1">
    Requires hbase-site.xml in job path
  </em>
</span>
        </div>

        <div id="transitions-7d0cb7ad-14ab-6076-3043-7b386ac9ef54" class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }">
  <!-- ko if: children().length == 2 -->
  OK --&gt;
  <select data-bind="options: $root.workflow.nodeIds,
      optionsText: function(item) {return $root.workflow.nodeNamesMapping()[item]; },
      value: children()[0]['to']
      "><option value="3f107997-04cc-8733-60a9-a4bb62cebffc">Start</option><option value="33430f0f-ebfa-c3ec-f237-3e77efa03d0a">End</option><option value="17c9c895-5a16-7443-bb81-f34b30b21548">Kill</option><option value="7d0cb7ad-14ab-6076-3043-7b386ac9ef54">hive2-7d0c</option><option selected="selected" value="a0dc9a2c-cf5f-f5cb-9cff-11307b938734">hive2-a0dc</option><option value="4c806cec-cda4-dc39-e706-cc751b97c598">hive2-4c80</option>
  </select>
  <br>
  KO --&gt;
  <select data-bind="options: $root.workflow.nodeIds,
     optionsText: function(item) {return $root.workflow.nodeNamesMapping()[item]; },
   value: children()[1]['error']
     "><option value="3f107997-04cc-8733-60a9-a4bb62cebffc">Start</option><option value="33430f0f-ebfa-c3ec-f237-3e77efa03d0a">End</option><option selected="selected" value="17c9c895-5a16-7443-bb81-f34b30b21548">Kill</option><option value="7d0cb7ad-14ab-6076-3043-7b386ac9ef54">hive2-7d0c</option><option value="a0dc9a2c-cf5f-f5cb-9cff-11307b938734">hive2-a0dc</option><option value="4c806cec-cda4-dc39-e706-cc751b97c598">hive2-4c80</option>
  </select>
  <!-- /ko -->
</span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</div>
      <div style="width: 0%;" class="widget-statusbar" data-bind="css: {'widget-statusbar': true, 'widget-statusbar-running': status() == 'running', 'widget-statusbar-failed': status() == 'failed', 'widget-statusbar-success': status() == 'success'}, style: {'width': progress() + '%'}"></div>
    </div>
  </div>
</div>
        <div style="display: none;" class="container-fluid" data-bind="visible: columns().length &gt; 0">
          <div class="row-fluid row-container is-editing" data-bind="css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing}">
            <div data-bind="template: { name: 'internal-column-template', foreach: columns}"></div>
          </div>
        </div>
      </div>
      <div style="" class="span1" data-bind="css: {'span1': true, 'readonly no-margin': ! $root.isEditing()}, style: {'margin': ! $root.isEditing() ? '0':''}">
        <div class="drop-target drop-target-side ui-droppable is-editing" style="height: 108px;" data-bind="visible: $root.isEditing() &amp;&amp; enableOozieDropOnSide() &amp;&amp; !($data.widgets().length &gt; 0 &amp;&amp; ['join-widget', 'decision-widget'].indexOf($data.widgets()[0].widgetType()) &gt; -1), css: {'drop-target drop-target-side': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addSideDraggedWidget($data, false); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
    </div>
  </div>


  <div class="container-fluid">
    <div class="row-fluid" data-bind="visible: $index() &gt; 0 &amp;&amp; $root.isEditing() &amp;&amp; ! $root.isRowBeforeJoin($data) &amp;&amp; ! $root.isRowAfterFork($data)" style="margin-bottom: 10px;">
      <div class="span1 offset3andhalf" data-bind="css: {'span1': true, 'offset3andhalf': ($root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset4': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}"></div>
      <div class="span4" data-bind="css: {'span10': ($parents.length &gt; 2 || columns().length &gt; 0), 'span4': ($parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset3andhalf': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div class="drop-target drop-target-disabled is-editing" style="display: none;" data-bind="visible: $root.isEditing() &amp;&amp; ! enableOozieDropOnBefore(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
        <div class="drop-target ui-droppable is-editing" style="text-align: left;" data-bind="visible: $root.isEditing() &amp;&amp; enableOozieDropOnBefore(), css: {'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addDraggedWidget($data); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
      <div class="span1" data-bind="css: {'span1': true, 'readonly': ! $root.isEditing()}"></div>
    </div>
    <div style="width: 100%;" class="row-fluid" data-bind="style: {'width': columns().length &lt; 5 ? '100%' : (columns().length * 25)+'%' }">
      <div class="span1 offset3andhalf" data-bind="css: {'span1': true, 'offset3andhalf': ($root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset4': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div class="drop-target drop-target-side ui-droppable is-editing" style="height: 108px;" data-bind="visible: $root.isEditing() &amp;&amp; enableOozieDropOnSide() &amp;&amp; !($data.widgets().length &gt; 0 &amp;&amp; ['join-widget', 'decision-widget'].indexOf($data.widgets()[0].widgetType()) &gt; -1), css: {'drop-target drop-target-side': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addSideDraggedWidget($data, true); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
      <div class="span4" data-bind="css: {'span10': ($parents.length &gt; 2 || columns().length &gt; 0), 'span4': ($parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset3andhalf': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div class="row-fluid row-container ui-sortable ui-sortable-disabled is-editing" data-bind="visible: columns().length == 0, css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing},
          sortable: { template: 'widget-template', data: widgets, allowDrop: enableOozieDrop, isEnabled: enableOozieDrop,
          options: {'opacity': 0.7, 'placeholder': 'row-highlight', 'greedy': true,
              'stop': function(event, ui){},
              'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.toElement).text());_title.appendTo(_par);_par.height(80);_par.width(180);return _par;}},
              dragged: function(widget){widgetDraggedAdditionalHandler(widget)}}">
  <div aria-disabled="false" class="card card-widget span12 ui-draggable" id="wdg_a0dc9a2c-cf5f-f5cb-9cff-11307b938734" data-bind="attr: {'id': 'wdg_'+ id(),}, css: klass() + (ooziePropertiesExpanded()?' expanded-widget':'') + ($root.isRunning() &amp;&amp; status() == ''?' widget-running':''),
      draggable: {data: $data, isEnabled: true, options: {'handle': '.move-widget', 'opacity': 0.7, 'refreshPositions': true, 'start': function(event, ui){ $root.setCurrentlyDraggedWidget($data, event.toElement || event.originalEvent.originalEvent.target); $root.isDragging(true); if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', -$(window).scrollTop() ); } }, 'beforestop': function (event, ui) { if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', 0 ); } }, 'stop': function(event, ui){ $root.enableSideDrop($data); $root.isDragging(false); }, 'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.currentTarget).find('h2 a.pointer').text());_title.appendTo(_par);_par.css('minHeight', '10px');_par.css('overflow', 'hidden');_par.width(180);return _par;}}}">
    <h2 class="card-heading simple" data-bind="visible: widgetType() != 'start-widget' &amp;&amp; widgetType() != 'end-widget' &amp;&amp;
        id() != '17c9c895-5a16-7443-bb81-f34b30b21548' &amp;&amp; (['fork-widget', 'join-widget', 'decision-widget'].indexOf(widgetType()) == -1 || $root.isEditing())">

      <span style="" data-bind="visible: $root.isEditing() &amp;&amp; oozieMovable() &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; ($root.newAction() == null || $root.newAction().id() != id())">
        <a href="javascript:void(0)" class="move-widget" title="Move node"><i class="fa fa-arrows"></i></a>
        &nbsp;
        <a href="javascript:void(0)" class="move-widget clone-widget" title="Copy node"><i class="fa fa-copy"></i></a>
        &nbsp;
      </span>

      <!-- ko if: widgetType() == 'hive-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'hive2-widget' -->
      <img src="Oozie%20scheduling_files/icon_beeswax_48.png" class="widget-icon"><sup style="color: #338bb8; margin-left: -4px">2</sup>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'pig-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'java-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'sqoop-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'mapreduce-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'subworkflow-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'shell-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'ssh-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'fs-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'email-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'streaming-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'distcp-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'spark-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'kill-widget' --><!-- /ko -->

      <span title="a0dc" class="editable editable-click" data-bind="visible: typeof $root.isViewer == 'undefined' || ! $root.isViewer(), editable: name, editableOptions: {enabled: $root.isEditing(), placement: 'right'}, attr: {'title': id().slice(0, 4)}">HiveServer2 Script</span>
      <a style="display: none;" class="pointer" data-bind="visible: typeof $root.isViewer != 'undefined' &amp;&amp; $root.isViewer(), click: function(){ location.href = actionURL(); }, text: name" title="View workflow action">HiveServer2 Script</a>

      <!-- ko if: widgetType() == 'decision-widget' --><!-- /ko -->
      <!-- ko if: widgetType() != 'decision-widget' -->
        <div style="" class="inline pull-right" data-bind="visible: $root.isEditing() &amp;&amp; (['start-widget', 'end-widget', 'fork-widget', 'join-widget'].indexOf(widgetType()) == -1) &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded()">
          <a href="javascript:void(0)" data-bind="click: function(w){addActionDemiModalFieldCancel();$root.removeWidget(w);}"><i class="fa fa-times"></i></a>
        </div>
      <!-- /ko -->
      <!-- ko if: ooziePropertiesExpanded() --><!-- /ko -->
    </h2>
    <div class="card-body" style="padding: 0; position: relative">
      <div style="" class="advanced-triangle-container" data-bind="visible: $root.isEditing() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; oozieMovable(), click: toggleProperties">
        <div class="advanced-triangle">
          <a href="javascript:void(0)"><i class="fa fa-cogs"></i></a>
        </div>
      </div>
      <!-- ko if: id() == '17c9c895-5a16-7443-bb81-f34b30b21548' && ooziePropertiesExpanded() --><!-- /ko -->
      <div data-bind="template: { name: function() { return widgetType(); }}" class="widget-main-section">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">

    <div style="display: none;" data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }">
  <!-- ko if: $parent.logsURL() != '' && $parent.logsURL() != null --><!-- /ko -->
</span>
      <span data-bind="template: { name: &quot;common-fs-link&quot;, data: {path: properties.script_path(), with_label: true} }">
<!-- ko if: $data.path.length > 0 -->
  <!-- ko if: with_label -->
    <a title="Open /user/cloudera/load_data.hql" href="http://quickstart.cloudera:8888/filebrowser/view/user/cloudera/load_data.hql" data-bind="attr: {href: '/filebrowser/view' + ($data.path.indexOf('/') == -1 ? $root.workflow.properties.deployment_dir() + '/' : '') + $data.path , title: 'Open '+ $data.path }" target="_blank">
      <span data-bind="text: $data.path.lastIndexOf('/') == $data.path.length - 1 ? $data.path : $data.path.split('/').pop()">load_data.hql</span>
    </a>
  <!-- /ko -->

   <!-- ko if: ! with_label --><!-- /ko -->
 <!-- /ko -->
</span>
    </div>

    <div style="" data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <input value="/user/cloudera/load_data.hql" placeholder="Path to the script on HDFS." data-original-title="/user/cloudera/load_data.hql" autocomplete="off" class="filechooser-input" data-bind="filechooser: properties.script_path, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.script_path, attr: { placeholder:  $root.workflow_properties.script_path.help_text }" type="text"><button class="btn fileChooserBtn">..</button>
        <span data-bind="template: { name: &quot;common-fs-link&quot;, data: {path: properties.script_path(), with_label: false}}">
<!-- ko if: $data.path.length > 0 -->
  <!-- ko if: with_label --><!-- /ko -->

   <!-- ko if: ! with_label -->
     <a href="http://quickstart.cloudera:8888/filebrowser/view/user/cloudera/load_data.hql" data-bind="attr: {href: '/filebrowser/view' + ($data.path.indexOf('/') == -1 ? $root.workflow.properties.deployment_dir() + '/' : '') + $data.path }" target="_blank" title="Open">
       <i class="fa fa-external-link-square"></i>
     </a>
   <!-- /ko -->
 <!-- /ko -->
</span>

        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-parameters' }">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.parameters.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows')}">
      Parameters <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="foreach: properties.parameters"></ul>
</div>
          <div class="span6" data-bind="template: { name: 'common-properties-files' }">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.files.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows') }">
      Files <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="foreach: properties.files"></ul>
</div>
        </div>
      </div>
    </div>


    <div style="display: none;" data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a href="#properties-a0dc9a2c-cf5f-f5cb-9cff-11307b938734" data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla-a0dc9a2c-cf5f-f5cb-9cff-11307b938734" data-toggle="tab">SLA</a></li>
        <li><a href="#credentials-a0dc9a2c-cf5f-f5cb-9cff-11307b938734" data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a href="#transitions-a0dc9a2c-cf5f-f5cb-9cff-11307b938734" data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div id="properties-a0dc9a2c-cf5f-f5cb-9cff-11307b938734" class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="text: $root.workflow_properties.jdbc_url.label">HiveServer2 URL</span>
          <input placeholder="e.g. jdbc:hive2://localhost:10000/default. JDBC URL for the Hive Server 2." data-bind="value: properties.jdbc_url, attr: { placeholder: $root.workflow_properties.jdbc_url.help_text }" type="text">
          <br>
          <span data-bind="text: $root.workflow_properties.password.label">Password</span>
          <input placeholder="The password element must contain the password of the current user. However, the password is only used if Hive Server 2 is backed by something requiring a password (e.g. LDAP); non-secured Hive Server 2 or Kerberized Hive Server 2 don't require a password." data-bind="value: properties.password, attr: { placeholder: $root.workflow_properties.password.help_text }" type="text">
          <br>
          <span data-bind="template: { name: 'common-action-properties' }">
  <div class="properties">
    <h6>Prepare</h6>
    <ul style="display: none;" data-bind="visible: properties.prepares().length &gt; 0, foreach: properties.prepares" class="unstyled"></ul>
    <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'mkdir', 'value': ''}); $(document).trigger('drawArrows') }">
      Directory <i class="fa fa-plus"></i>
    </a>
    <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'delete', 'value': ''}); $(document).trigger('drawArrows') }">
      Delete <i class="fa fa-plus"></i>
    </a>

    <!-- ko if: properties.job_xml --><!-- /ko -->

    <h6>
      <a class="pointer" data-bind="click: function(){ properties.job_properties.push({'name': '', 'value': ''}); $(document).trigger('drawArrows') }">
        Properties <i class="fa fa-plus"></i>
      </a>
    </h6>
    <ul style="display: none;" data-bind="visible: properties.job_properties().length &gt; 0, foreach: properties.job_properties" class="unstyled"></ul>
    <em data-bind="visible: properties.job_properties().length == 0">No properties defined.</em>

    <!-- ko if: properties.archives -->
    <h6>
      <a class="pointer" data-bind="click: function(){ properties.archives.push(ko.mapping.fromJS({'name': ''})); $(document).trigger('drawArrows') }">
        Archives <i class="fa fa-plus"></i>
      </a>
    </h6>
    <ul style="display: none;" data-bind="visible: properties.archives().length &gt; 0, foreach: properties.archives" class="unstyled"></ul>
    <em data-bind="visible: properties.archives().length == 0">No archives defined.</em>
    <!-- /ko -->
  </div>
</span>
          <br>
          <br>
        </div>

        <div id="sla-a0dc9a2c-cf5f-f5cb-9cff-11307b938734" class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }">
  <div data-bind="with: properties">
     
  <div data-bind="foreach: { 'data': sla, 'afterRender': addSLATextAndPlaceholder }">
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' -->
      <label class="checkbox" style="text-align: left"><span class="control-label">Enable</span> <input placeholder="" data-bind="checked: value" type="checkbox"></label>
      <!-- /ko -->
      <!-- ko if:  key() != 'enabled' --><!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Nominal time *</label>
      <div class="controls">
        <input value="${nominal_time}" placeholder="${nominal_time}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Should start</label>
      <div class="controls">
        <input placeholder="${10 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Should end *</label>
      <div class="controls">
        <input value="${30 * MINUTES}" placeholder="${30 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Max duration</label>
      <div class="controls">
        <input placeholder="${30 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Alert events</label>
      <div class="controls">
        <input placeholder="start_miss,end_miss,duration_miss" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Alert contact</label>
      <div class="controls">
        <input placeholder="joe@example.com,bob@example.com" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Notification message</label>
      <div class="controls">
        <input placeholder="My Job has encountered an SLA event!" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Upstream apps</label>
      <div class="controls">
        <input placeholder="dependent-app-1, dependent-app-2" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  </div>

  </div>
</span>
        </div>

        <div id="credentials-a0dc9a2c-cf5f-f5cb-9cff-11307b938734" class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }">
  <em data-bind="visible: $root.credentials() == null || $root.credentials().length == 0">No available credentials.</em>
  <select style="display: none;" data-bind="visible: $root.credentials() != null &amp;&amp; $root.credentials().length &gt; 0, options: $root.credentials, selectedOptions: properties.credentials" size="5" multiple="true"></select>

  <em style="display: none;" data-bind="visible: properties.credentials &amp;&amp; properties.credentials.indexOf('hbase') != -1">
    Requires hbase-site.xml in job path
  </em>
</span>
        </div>

        <div id="transitions-a0dc9a2c-cf5f-f5cb-9cff-11307b938734" class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }">
  <!-- ko if: children().length == 2 -->
  OK --&gt;
  <select data-bind="options: $root.workflow.nodeIds,
      optionsText: function(item) {return $root.workflow.nodeNamesMapping()[item]; },
      value: children()[0]['to']
      "><option value="3f107997-04cc-8733-60a9-a4bb62cebffc">Start</option><option value="33430f0f-ebfa-c3ec-f237-3e77efa03d0a">End</option><option value="17c9c895-5a16-7443-bb81-f34b30b21548">Kill</option><option value="7d0cb7ad-14ab-6076-3043-7b386ac9ef54">hive2-7d0c</option><option value="a0dc9a2c-cf5f-f5cb-9cff-11307b938734">hive2-a0dc</option><option selected="selected" value="4c806cec-cda4-dc39-e706-cc751b97c598">hive2-4c80</option>
  </select>
  <br>
  KO --&gt;
  <select data-bind="options: $root.workflow.nodeIds,
     optionsText: function(item) {return $root.workflow.nodeNamesMapping()[item]; },
   value: children()[1]['error']
     "><option value="3f107997-04cc-8733-60a9-a4bb62cebffc">Start</option><option value="33430f0f-ebfa-c3ec-f237-3e77efa03d0a">End</option><option selected="selected" value="17c9c895-5a16-7443-bb81-f34b30b21548">Kill</option><option value="7d0cb7ad-14ab-6076-3043-7b386ac9ef54">hive2-7d0c</option><option value="a0dc9a2c-cf5f-f5cb-9cff-11307b938734">hive2-a0dc</option><option value="4c806cec-cda4-dc39-e706-cc751b97c598">hive2-4c80</option>
  </select>
  <!-- /ko -->
</span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</div>
      <div style="width: 0%;" class="widget-statusbar" data-bind="css: {'widget-statusbar': true, 'widget-statusbar-running': status() == 'running', 'widget-statusbar-failed': status() == 'failed', 'widget-statusbar-success': status() == 'success'}, style: {'width': progress() + '%'}"></div>
    </div>
  </div>
</div>
        <div style="display: none;" class="container-fluid" data-bind="visible: columns().length &gt; 0">
          <div class="row-fluid row-container is-editing" data-bind="css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing}">
            <div data-bind="template: { name: 'internal-column-template', foreach: columns}"></div>
          </div>
        </div>
      </div>
      <div style="" class="span1" data-bind="css: {'span1': true, 'readonly no-margin': ! $root.isEditing()}, style: {'margin': ! $root.isEditing() ? '0':''}">
        <div class="drop-target drop-target-side ui-droppable is-editing" style="height: 108px;" data-bind="visible: $root.isEditing() &amp;&amp; enableOozieDropOnSide() &amp;&amp; !($data.widgets().length &gt; 0 &amp;&amp; ['join-widget', 'decision-widget'].indexOf($data.widgets()[0].widgetType()) &gt; -1), css: {'drop-target drop-target-side': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addSideDraggedWidget($data, false); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
    </div>
  </div>


  <div class="container-fluid">
    <div class="row-fluid" data-bind="visible: $index() &gt; 0 &amp;&amp; $root.isEditing() &amp;&amp; ! $root.isRowBeforeJoin($data) &amp;&amp; ! $root.isRowAfterFork($data)" style="margin-bottom: 10px;">
      <div class="span1 offset3andhalf" data-bind="css: {'span1': true, 'offset3andhalf': ($root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset4': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}"></div>
      <div class="span4" data-bind="css: {'span10': ($parents.length &gt; 2 || columns().length &gt; 0), 'span4': ($parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset3andhalf': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div class="drop-target drop-target-disabled is-editing" style="display: none;" data-bind="visible: $root.isEditing() &amp;&amp; ! enableOozieDropOnBefore(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
        <div class="drop-target ui-droppable is-editing" style="text-align: left;" data-bind="visible: $root.isEditing() &amp;&amp; enableOozieDropOnBefore(), css: {'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addDraggedWidget($data); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
      <div class="span1" data-bind="css: {'span1': true, 'readonly': ! $root.isEditing()}"></div>
    </div>
    <div style="width: 100%;" class="row-fluid" data-bind="style: {'width': columns().length &lt; 5 ? '100%' : (columns().length * 25)+'%' }">
      <div class="span1 offset3andhalf" data-bind="css: {'span1': true, 'offset3andhalf': ($root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset4': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div class="drop-target drop-target-side ui-droppable is-editing" style="height: 108px;" data-bind="visible: $root.isEditing() &amp;&amp; enableOozieDropOnSide() &amp;&amp; !($data.widgets().length &gt; 0 &amp;&amp; ['join-widget', 'decision-widget'].indexOf($data.widgets()[0].widgetType()) &gt; -1), css: {'drop-target drop-target-side': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addSideDraggedWidget($data, true); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
      <div class="span4" data-bind="css: {'span10': ($parents.length &gt; 2 || columns().length &gt; 0), 'span4': ($parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'offset3andhalf': (!$root.isEditing() &amp;&amp; $parents.length &lt;= 2 &amp;&amp; columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div class="row-fluid row-container ui-sortable ui-sortable-disabled is-editing" data-bind="visible: columns().length == 0, css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing},
          sortable: { template: 'widget-template', data: widgets, allowDrop: enableOozieDrop, isEnabled: enableOozieDrop,
          options: {'opacity': 0.7, 'placeholder': 'row-highlight', 'greedy': true,
              'stop': function(event, ui){},
              'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.toElement).text());_title.appendTo(_par);_par.height(80);_par.width(180);return _par;}},
              dragged: function(widget){widgetDraggedAdditionalHandler(widget)}}">
  <div aria-disabled="false" class="card card-widget span12 ui-draggable" id="wdg_4c806cec-cda4-dc39-e706-cc751b97c598" data-bind="attr: {'id': 'wdg_'+ id(),}, css: klass() + (ooziePropertiesExpanded()?' expanded-widget':'') + ($root.isRunning() &amp;&amp; status() == ''?' widget-running':''),
      draggable: {data: $data, isEnabled: true, options: {'handle': '.move-widget', 'opacity': 0.7, 'refreshPositions': true, 'start': function(event, ui){ $root.setCurrentlyDraggedWidget($data, event.toElement || event.originalEvent.originalEvent.target); $root.isDragging(true); if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', -$(window).scrollTop() ); } }, 'beforestop': function (event, ui) { if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', 0 ); } }, 'stop': function(event, ui){ $root.enableSideDrop($data); $root.isDragging(false); }, 'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.currentTarget).find('h2 a.pointer').text());_title.appendTo(_par);_par.css('minHeight', '10px');_par.css('overflow', 'hidden');_par.width(180);return _par;}}}">
    <h2 class="card-heading simple" data-bind="visible: widgetType() != 'start-widget' &amp;&amp; widgetType() != 'end-widget' &amp;&amp;
        id() != '17c9c895-5a16-7443-bb81-f34b30b21548' &amp;&amp; (['fork-widget', 'join-widget', 'decision-widget'].indexOf(widgetType()) == -1 || $root.isEditing())">

      <span style="" data-bind="visible: $root.isEditing() &amp;&amp; oozieMovable() &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; ($root.newAction() == null || $root.newAction().id() != id())">
        <a href="javascript:void(0)" class="move-widget" title="Move node"><i class="fa fa-arrows"></i></a>
        &nbsp;
        <a href="javascript:void(0)" class="move-widget clone-widget" title="Copy node"><i class="fa fa-copy"></i></a>
        &nbsp;
      </span>

      <!-- ko if: widgetType() == 'hive-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'hive2-widget' -->
      <img src="Oozie%20scheduling_files/icon_beeswax_48.png" class="widget-icon"><sup style="color: #338bb8; margin-left: -4px">2</sup>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'pig-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'java-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'sqoop-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'mapreduce-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'subworkflow-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'shell-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'ssh-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'fs-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'email-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'streaming-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'distcp-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'spark-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'kill-widget' --><!-- /ko -->

      <span title="4c80" class="editable editable-click" data-bind="visible: typeof $root.isViewer == 'undefined' || ! $root.isViewer(), editable: name, editableOptions: {enabled: $root.isEditing(), placement: 'right'}, attr: {'title': id().slice(0, 4)}">HiveServer2 Script</span>
      <a style="display: none;" class="pointer" data-bind="visible: typeof $root.isViewer != 'undefined' &amp;&amp; $root.isViewer(), click: function(){ location.href = actionURL(); }, text: name" title="View workflow action">HiveServer2 Script</a>

      <!-- ko if: widgetType() == 'decision-widget' --><!-- /ko -->
      <!-- ko if: widgetType() != 'decision-widget' -->
        <div style="" class="inline pull-right" data-bind="visible: $root.isEditing() &amp;&amp; (['start-widget', 'end-widget', 'fork-widget', 'join-widget'].indexOf(widgetType()) == -1) &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded()">
          <a href="javascript:void(0)" data-bind="click: function(w){addActionDemiModalFieldCancel();$root.removeWidget(w);}"><i class="fa fa-times"></i></a>
        </div>
      <!-- /ko -->
      <!-- ko if: ooziePropertiesExpanded() --><!-- /ko -->
    </h2>
    <div class="card-body" style="padding: 0; position: relative">
      <div style="" class="advanced-triangle-container" data-bind="visible: $root.isEditing() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; oozieMovable(), click: toggleProperties">
        <div class="advanced-triangle">
          <a href="javascript:void(0)"><i class="fa fa-cogs"></i></a>
        </div>
      </div>
      <!-- ko if: id() == '17c9c895-5a16-7443-bb81-f34b30b21548' && ooziePropertiesExpanded() --><!-- /ko -->
      <div data-bind="template: { name: function() { return widgetType(); }}" class="widget-main-section">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">

    <div style="display: none;" data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }">
  <!-- ko if: $parent.logsURL() != '' && $parent.logsURL() != null --><!-- /ko -->
</span>
      <span data-bind="template: { name: &quot;common-fs-link&quot;, data: {path: properties.script_path(), with_label: true} }">
<!-- ko if: $data.path.length > 0 -->
  <!-- ko if: with_label -->
    <a title="Open /user/cloudera/aggregation.hql" href="http://quickstart.cloudera:8888/filebrowser/view/user/cloudera/aggregation.hql" data-bind="attr: {href: '/filebrowser/view' + ($data.path.indexOf('/') == -1 ? $root.workflow.properties.deployment_dir() + '/' : '') + $data.path , title: 'Open '+ $data.path }" target="_blank">
      <span data-bind="text: $data.path.lastIndexOf('/') == $data.path.length - 1 ? $data.path : $data.path.split('/').pop()">aggregation.hql</span>
    </a>
  <!-- /ko -->

   <!-- ko if: ! with_label --><!-- /ko -->
 <!-- /ko -->
</span>
    </div>

    <div style="" data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <input value="/user/cloudera/aggregation.hql" placeholder="Path to the script on HDFS." data-original-title="/user/cloudera/aggregation.hql" autocomplete="off" class="filechooser-input" data-bind="filechooser: properties.script_path, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.script_path, attr: { placeholder:  $root.workflow_properties.script_path.help_text }" type="text"><button class="btn fileChooserBtn">..</button>
        <span data-bind="template: { name: &quot;common-fs-link&quot;, data: {path: properties.script_path(), with_label: false}}">
<!-- ko if: $data.path.length > 0 -->
  <!-- ko if: with_label --><!-- /ko -->

   <!-- ko if: ! with_label -->
     <a href="http://quickstart.cloudera:8888/filebrowser/view/user/cloudera/aggregation.hql" data-bind="attr: {href: '/filebrowser/view' + ($data.path.indexOf('/') == -1 ? $root.workflow.properties.deployment_dir() + '/' : '') + $data.path }" target="_blank" title="Open">
       <i class="fa fa-external-link-square"></i>
     </a>
   <!-- /ko -->
 <!-- /ko -->
</span>

        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-parameters' }">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.parameters.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows')}">
      Parameters <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="foreach: properties.parameters"></ul>
</div>
          <div class="span6" data-bind="template: { name: 'common-properties-files' }">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.files.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows') }">
      Files <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="foreach: properties.files"></ul>
</div>
        </div>
      </div>
    </div>


    <div style="display: none;" data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a href="#properties-4c806cec-cda4-dc39-e706-cc751b97c598" data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla-4c806cec-cda4-dc39-e706-cc751b97c598" data-toggle="tab">SLA</a></li>
        <li><a href="#credentials-4c806cec-cda4-dc39-e706-cc751b97c598" data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a href="#transitions-4c806cec-cda4-dc39-e706-cc751b97c598" data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div id="properties-4c806cec-cda4-dc39-e706-cc751b97c598" class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="text: $root.workflow_properties.jdbc_url.label">HiveServer2 URL</span>
          <input placeholder="e.g. jdbc:hive2://localhost:10000/default. JDBC URL for the Hive Server 2." data-bind="value: properties.jdbc_url, attr: { placeholder: $root.workflow_properties.jdbc_url.help_text }" type="text">
          <br>
          <span data-bind="text: $root.workflow_properties.password.label">Password</span>
          <input placeholder="The password element must contain the password of the current user. However, the password is only used if Hive Server 2 is backed by something requiring a password (e.g. LDAP); non-secured Hive Server 2 or Kerberized Hive Server 2 don't require a password." data-bind="value: properties.password, attr: { placeholder: $root.workflow_properties.password.help_text }" type="text">
          <br>
          <span data-bind="template: { name: 'common-action-properties' }">
  <div class="properties">
    <h6>Prepare</h6>
    <ul style="display: none;" data-bind="visible: properties.prepares().length &gt; 0, foreach: properties.prepares" class="unstyled"></ul>
    <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'mkdir', 'value': ''}); $(document).trigger('drawArrows') }">
      Directory <i class="fa fa-plus"></i>
    </a>
    <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'delete', 'value': ''}); $(document).trigger('drawArrows') }">
      Delete <i class="fa fa-plus"></i>
    </a>

    <!-- ko if: properties.job_xml --><!-- /ko -->

    <h6>
      <a class="pointer" data-bind="click: function(){ properties.job_properties.push({'name': '', 'value': ''}); $(document).trigger('drawArrows') }">
        Properties <i class="fa fa-plus"></i>
      </a>
    </h6>
    <ul style="display: none;" data-bind="visible: properties.job_properties().length &gt; 0, foreach: properties.job_properties" class="unstyled"></ul>
    <em data-bind="visible: properties.job_properties().length == 0">No properties defined.</em>

    <!-- ko if: properties.archives -->
    <h6>
      <a class="pointer" data-bind="click: function(){ properties.archives.push(ko.mapping.fromJS({'name': ''})); $(document).trigger('drawArrows') }">
        Archives <i class="fa fa-plus"></i>
      </a>
    </h6>
    <ul style="display: none;" data-bind="visible: properties.archives().length &gt; 0, foreach: properties.archives" class="unstyled"></ul>
    <em data-bind="visible: properties.archives().length == 0">No archives defined.</em>
    <!-- /ko -->
  </div>
</span>
          <br>
          <br>
        </div>

        <div id="sla-4c806cec-cda4-dc39-e706-cc751b97c598" class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }">
  <div data-bind="with: properties">
     
  <div data-bind="foreach: { 'data': sla, 'afterRender': addSLATextAndPlaceholder }">
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' -->
      <label class="checkbox" style="text-align: left"><span class="control-label">Enable</span> <input placeholder="" data-bind="checked: value" type="checkbox"></label>
      <!-- /ko -->
      <!-- ko if:  key() != 'enabled' --><!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Nominal time *</label>
      <div class="controls">
        <input value="${nominal_time}" placeholder="${nominal_time}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Should start</label>
      <div class="controls">
        <input placeholder="${10 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Should end *</label>
      <div class="controls">
        <input value="${30 * MINUTES}" placeholder="${30 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Max duration</label>
      <div class="controls">
        <input placeholder="${30 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Alert events</label>
      <div class="controls">
        <input placeholder="start_miss,end_miss,duration_miss" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Alert contact</label>
      <div class="controls">
        <input placeholder="joe@example.com,bob@example.com" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Notification message</label>
      <div class="controls">
        <input placeholder="My Job has encountered an SLA event!" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Upstream apps</label>
      <div class="controls">
        <input placeholder="dependent-app-1, dependent-app-2" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  </div>

  </div>
</span>
        </div>

        <div id="credentials-4c806cec-cda4-dc39-e706-cc751b97c598" class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }">
  <em data-bind="visible: $root.credentials() == null || $root.credentials().length == 0">No available credentials.</em>
  <select style="display: none;" data-bind="visible: $root.credentials() != null &amp;&amp; $root.credentials().length &gt; 0, options: $root.credentials, selectedOptions: properties.credentials" size="5" multiple="true"></select>

  <em style="display: none;" data-bind="visible: properties.credentials &amp;&amp; properties.credentials.indexOf('hbase') != -1">
    Requires hbase-site.xml in job path
  </em>
</span>
        </div>

        <div id="transitions-4c806cec-cda4-dc39-e706-cc751b97c598" class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }">
  <!-- ko if: children().length == 2 -->
  OK --&gt;
  <select data-bind="options: $root.workflow.nodeIds,
      optionsText: function(item) {return $root.workflow.nodeNamesMapping()[item]; },
      value: children()[0]['to']
      "><option value="3f107997-04cc-8733-60a9-a4bb62cebffc">Start</option><option selected="selected" value="33430f0f-ebfa-c3ec-f237-3e77efa03d0a">End</option><option value="17c9c895-5a16-7443-bb81-f34b30b21548">Kill</option><option value="7d0cb7ad-14ab-6076-3043-7b386ac9ef54">hive2-7d0c</option><option value="a0dc9a2c-cf5f-f5cb-9cff-11307b938734">hive2-a0dc</option><option value="4c806cec-cda4-dc39-e706-cc751b97c598">hive2-4c80</option>
  </select>
  <br>
  KO --&gt;
  <select data-bind="options: $root.workflow.nodeIds,
     optionsText: function(item) {return $root.workflow.nodeNamesMapping()[item]; },
   value: children()[1]['error']
     "><option value="3f107997-04cc-8733-60a9-a4bb62cebffc">Start</option><option value="33430f0f-ebfa-c3ec-f237-3e77efa03d0a">End</option><option selected="selected" value="17c9c895-5a16-7443-bb81-f34b30b21548">Kill</option><option value="7d0cb7ad-14ab-6076-3043-7b386ac9ef54">hive2-7d0c</option><option value="a0dc9a2c-cf5f-f5cb-9cff-11307b938734">hive2-a0dc</option><option value="4c806cec-cda4-dc39-e706-cc751b97c598">hive2-4c80</option>
  </select>
  <!-- /ko -->
</span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</div>
      <div style="width: 0%;" class="widget-statusbar" data-bind="css: {'widget-statusbar': true, 'widget-statusbar-running': status() == 'running', 'widget-statusbar-failed': status() == 'failed', 'widget-statusbar-success': status() == 'success'}, style: {'width': progress() + '%'}"></div>
    </div>
  </div>
</div>
        <div style="display: none;" class="container-fluid" data-bind="visible: columns().length &gt; 0">
          <div class="row-fluid row-container is-editing" data-bind="css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing}">
            <div data-bind="template: { name: 'internal-column-template', foreach: columns}"></div>
          </div>
        </div>
      </div>
      <div style="" class="span1" data-bind="css: {'span1': true, 'readonly no-margin': ! $root.isEditing()}, style: {'margin': ! $root.isEditing() ? '0':''}">
        <div class="drop-target drop-target-side ui-droppable is-editing" style="height: 108px;" data-bind="visible: $root.isEditing() &amp;&amp; enableOozieDropOnSide() &amp;&amp; !($data.widgets().length &gt; 0 &amp;&amp; ['join-widget', 'decision-widget'].indexOf($data.widgets()[0].widgetType()) &gt; -1), css: {'drop-target drop-target-side': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addSideDraggedWidget($data, false); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
    </div>
  </div>

</div>
    <div style="" class="container-fluid" data-bind="visible: $root.isEditing() &amp;&amp; rows().length &gt; 0">
      <div class="row-fluid">
        <div class="span4 offset4 drop-target ui-droppable is-editing" data-bind="visible: enableOozieDropOnAfter, css: {'span4 offset4': true, 'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addDraggedWidget($data, false); widgetDraggedAdditionalHandler(_w); } }">
          <span style="display: none;" data-bind="visible: oozieRows().length == 0">Drop your action here</span>
        </div>
        <div class="drop-target drop-target-disabled is-editing" style="display: none;" data-bind="visible: ! enableOozieDropOnAfter(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
      </div>
    </div>

    <div data-bind="template: { name: 'row-template', data: oozieEndRow }">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span4 offset4">
        <div class="row-fluid row-container ui-sortable ui-sortable-disabled is-editing" data-bind="css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing},
          sortable: { template: 'widget-template', data: widgets, allowDrop: $root.isEditing() &amp;&amp; widgets().length &lt; 1, isEnabled: $root.isEditing() &amp;&amp; widgets().length &lt; 1,
          options: {'opacity': 0.7, 'placeholder': 'row-highlight', 'greedy': true,
              'stop': function(event, ui){},
              'helper': function(event){lastWindowScrollPosition = $(window).scrollTop(); var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.toElement).text());_title.appendTo(_par);_par.height(80);_par.width(180);return _par;}},
              dragged: function(widget){widgetDraggedAdditionalHandler(widget)}}">
  <div aria-disabled="false" class="card card-widget span12 ui-draggable" id="wdg_33430f0f-ebfa-c3ec-f237-3e77efa03d0a" data-bind="attr: {'id': 'wdg_'+ id(),}, css: klass() + (ooziePropertiesExpanded()?' expanded-widget':'') + ($root.isRunning() &amp;&amp; status() == ''?' widget-running':''),
      draggable: {data: $data, isEnabled: true, options: {'handle': '.move-widget', 'opacity': 0.7, 'refreshPositions': true, 'start': function(event, ui){ $root.setCurrentlyDraggedWidget($data, event.toElement || event.originalEvent.originalEvent.target); $root.isDragging(true); if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', -$(window).scrollTop() ); } }, 'beforestop': function (event, ui) { if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', 0 ); } }, 'stop': function(event, ui){ $root.enableSideDrop($data); $root.isDragging(false); }, 'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.currentTarget).find('h2 a.pointer').text());_title.appendTo(_par);_par.css('minHeight', '10px');_par.css('overflow', 'hidden');_par.width(180);return _par;}}}">
    <h2 style="display: none;" class="card-heading simple" data-bind="visible: widgetType() != 'start-widget' &amp;&amp; widgetType() != 'end-widget' &amp;&amp;
        id() != '17c9c895-5a16-7443-bb81-f34b30b21548' &amp;&amp; (['fork-widget', 'join-widget', 'decision-widget'].indexOf(widgetType()) == -1 || $root.isEditing())">

      <span style="display: none;" data-bind="visible: $root.isEditing() &amp;&amp; oozieMovable() &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; ($root.newAction() == null || $root.newAction().id() != id())">
        <a href="javascript:void(0)" class="move-widget" title="Move node"><i class="fa fa-arrows"></i></a>
        &nbsp;
        <a href="javascript:void(0)" class="move-widget clone-widget" title="Copy node"><i class="fa fa-copy"></i></a>
        &nbsp;
      </span>

      <!-- ko if: widgetType() == 'hive-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'hive2-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'pig-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'java-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'sqoop-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'mapreduce-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'subworkflow-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'shell-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'ssh-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'fs-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'email-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'streaming-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'distcp-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'spark-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'kill-widget' --><!-- /ko -->

      <span title="3343" class="editable editable-click" data-bind="visible: typeof $root.isViewer == 'undefined' || ! $root.isViewer(), editable: name, editableOptions: {enabled: $root.isEditing(), placement: 'right'}, attr: {'title': id().slice(0, 4)}">End</span>
      <a style="display: none;" class="pointer" data-bind="visible: typeof $root.isViewer != 'undefined' &amp;&amp; $root.isViewer(), click: function(){ location.href = actionURL(); }, text: name" title="View workflow action">End</a>

      <!-- ko if: widgetType() == 'decision-widget' --><!-- /ko -->
      <!-- ko if: widgetType() != 'decision-widget' -->
        <div style="display: none;" class="inline pull-right" data-bind="visible: $root.isEditing() &amp;&amp; (['start-widget', 'end-widget', 'fork-widget', 'join-widget'].indexOf(widgetType()) == -1) &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded()">
          <a href="javascript:void(0)" data-bind="click: function(w){addActionDemiModalFieldCancel();$root.removeWidget(w);}"><i class="fa fa-times"></i></a>
        </div>
      <!-- /ko -->
      <!-- ko if: ooziePropertiesExpanded() --><!-- /ko -->
    </h2>
    <div class="card-body" style="padding: 0; position: relative">
      <div style="display: none;" class="advanced-triangle-container" data-bind="visible: $root.isEditing() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; oozieMovable(), click: toggleProperties">
        <div class="advanced-triangle">
          <a href="javascript:void(0)"><i class="fa fa-cogs"></i></a>
        </div>
      </div>
      <!-- ko if: id() == '17c9c895-5a16-7443-bb81-f34b30b21548' && ooziePropertiesExpanded() --><!-- /ko -->
      <div data-bind="template: { name: function() { return widgetType(); }}" class="widget-main-section">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="min-height: 40px">
    <div class="big-icon" title="It is where we successfully finish!"><i class="fa fa-flag-checkered"></i></div>
  </div>
  <!-- /ko -->
</div>
      <div style="width: 0%;" class="widget-statusbar" data-bind="css: {'widget-statusbar': true, 'widget-statusbar-running': status() == 'running', 'widget-statusbar-failed': status() == 'failed', 'widget-statusbar-success': status() == 'success'}, style: {'width': progress() + '%'}"></div>
    </div>
  </div>
</div>
      </div>
    </div>
  </div>
</div>

    <div data-bind="template: { name: 'row-template', data: oozieKillRow }" style="margin-top: 60px">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span4 offset4">
        <div class="row-fluid row-container ui-sortable ui-sortable-disabled is-editing" data-bind="css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing},
          sortable: { template: 'widget-template', data: widgets, allowDrop: $root.isEditing() &amp;&amp; widgets().length &lt; 1, isEnabled: $root.isEditing() &amp;&amp; widgets().length &lt; 1,
          options: {'opacity': 0.7, 'placeholder': 'row-highlight', 'greedy': true,
              'stop': function(event, ui){},
              'helper': function(event){lastWindowScrollPosition = $(window).scrollTop(); var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.toElement).text());_title.appendTo(_par);_par.height(80);_par.width(180);return _par;}},
              dragged: function(widget){widgetDraggedAdditionalHandler(widget)}}">
  <div aria-disabled="false" class="card card-widget span12 ui-draggable" id="wdg_17c9c895-5a16-7443-bb81-f34b30b21548" data-bind="attr: {'id': 'wdg_'+ id(),}, css: klass() + (ooziePropertiesExpanded()?' expanded-widget':'') + ($root.isRunning() &amp;&amp; status() == ''?' widget-running':''),
      draggable: {data: $data, isEnabled: true, options: {'handle': '.move-widget', 'opacity': 0.7, 'refreshPositions': true, 'start': function(event, ui){ $root.setCurrentlyDraggedWidget($data, event.toElement || event.originalEvent.originalEvent.target); $root.isDragging(true); if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', -$(window).scrollTop() ); } }, 'beforestop': function (event, ui) { if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', 0 ); } }, 'stop': function(event, ui){ $root.enableSideDrop($data); $root.isDragging(false); }, 'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('&lt;div&gt;');_par.addClass('card card-widget');var _title = $('&lt;h2&gt;');_title.addClass('card-heading simple');_title.text($(event.currentTarget).find('h2 a.pointer').text());_title.appendTo(_par);_par.css('minHeight', '10px');_par.css('overflow', 'hidden');_par.width(180);return _par;}}}">
    <h2 style="display: none;" class="card-heading simple" data-bind="visible: widgetType() != 'start-widget' &amp;&amp; widgetType() != 'end-widget' &amp;&amp;
        id() != '17c9c895-5a16-7443-bb81-f34b30b21548' &amp;&amp; (['fork-widget', 'join-widget', 'decision-widget'].indexOf(widgetType()) == -1 || $root.isEditing())">

      <span style="" data-bind="visible: $root.isEditing() &amp;&amp; oozieMovable() &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; ($root.newAction() == null || $root.newAction().id() != id())">
        <a href="javascript:void(0)" class="move-widget" title="Move node"><i class="fa fa-arrows"></i></a>
        &nbsp;
        <a href="javascript:void(0)" class="move-widget clone-widget" title="Copy node"><i class="fa fa-copy"></i></a>
        &nbsp;
      </span>

      <!-- ko if: widgetType() == 'hive-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'hive2-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'pig-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'java-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'sqoop-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'mapreduce-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'subworkflow-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'shell-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'ssh-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'fs-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'email-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'streaming-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'distcp-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'spark-widget' --><!-- /ko -->

      <!-- ko if: widgetType() == 'kill-widget' -->
      <a class="widget-icon"><i class="fa fa-stop"></i></a>
      <!-- /ko -->

      <span title="17c9" class="editable editable-click" data-bind="visible: typeof $root.isViewer == 'undefined' || ! $root.isViewer(), editable: name, editableOptions: {enabled: $root.isEditing(), placement: 'right'}, attr: {'title': id().slice(0, 4)}">Kill</span>
      <a style="display: none;" class="pointer" data-bind="visible: typeof $root.isViewer != 'undefined' &amp;&amp; $root.isViewer(), click: function(){ location.href = actionURL(); }, text: name" title="View workflow action">Kill</a>

      <!-- ko if: widgetType() == 'decision-widget' --><!-- /ko -->
      <!-- ko if: widgetType() != 'decision-widget' -->
        <div style="" class="inline pull-right" data-bind="visible: $root.isEditing() &amp;&amp; (['start-widget', 'end-widget', 'fork-widget', 'join-widget'].indexOf(widgetType()) == -1) &amp;&amp; ! oozieExpanded() &amp;&amp; ! ooziePropertiesExpanded()">
          <a href="javascript:void(0)" data-bind="click: function(w){addActionDemiModalFieldCancel();$root.removeWidget(w);}"><i class="fa fa-times"></i></a>
        </div>
      <!-- /ko -->
      <!-- ko if: ooziePropertiesExpanded() --><!-- /ko -->
    </h2>
    <div class="card-body" style="padding: 0; position: relative">
      <div style="" class="advanced-triangle-container" data-bind="visible: $root.isEditing() &amp;&amp; ! ooziePropertiesExpanded() &amp;&amp; oozieMovable(), click: toggleProperties">
        <div class="advanced-triangle">
          <a href="javascript:void(0)"><i class="fa fa-cogs"></i></a>
        </div>
      </div>
      <!-- ko if: id() == '17c9c895-5a16-7443-bb81-f34b30b21548' && ooziePropertiesExpanded() --><!-- /ko -->
      <div data-bind="template: { name: function() { return widgetType(); }}" class="widget-main-section">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="min-height: 40px">
    <div class="big-icon" data-bind="visible: id() == '17c9c895-5a16-7443-bb81-f34b30b21548'" title="It is where we finish if failure!"><i class="fa fa-stop"></i></div>

    <div style="" data-bind="visible: $root.isEditing">
      <div style="display: none;" data-bind="visible: $parent.ooziePropertiesExpanded">
        <h6 class="field-title">Message</h6>
        <textarea class="span12" data-bind="value: properties.message">Action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</textarea>
      </div>
    </div>
  </div>
  <!-- /ko -->
</div>
      <div style="width: 0%;" class="widget-statusbar" data-bind="css: {'widget-statusbar': true, 'widget-statusbar-running': status() == 'running', 'widget-statusbar-failed': status() == 'failed', 'widget-statusbar-success': status() == 'success'}, style: {'width': progress() + '%'}"></div>
    </div>
  </div>
</div>
      </div>
    </div>
  </div>
</div>
  </div>
</div>
    <div class="clearfix"></div>
  </div>
</div>


<script type="text/html" id="column-template">
  <div data-bind="css: klass()" style="min-height: 50px !important;">
    <div data-bind="template: { name: 'row-template', data: oozieStartRow }" style="margin-top: 0"></div>
    <div class="container-fluid" data-bind="visible: $root.isEditing() && oozieRows().length > 0">
      <div class="row-fluid">
        <div data-bind="visible: enableOozieDropOnBefore, css: {'span4 offset4': true, 'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(x, y){ var _w = $root.addDraggedWidget($data, true); widgetDraggedAdditionalHandler(_w); } }"></div>
        <div data-bind="visible: ! enableOozieDropOnBefore(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
      </div>
    </div>
    <div data-bind="template: { name: 'internal-row-template', foreach: oozieRows}">
    </div>
    <div class="container-fluid" data-bind="visible: $root.isEditing() && rows().length > 0">
      <div class="row-fluid">
        <div data-bind="visible: enableOozieDropOnAfter, css: {'span4 offset4': true, 'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addDraggedWidget($data, false); widgetDraggedAdditionalHandler(_w); } }">
          <span data-bind="visible: oozieRows().length == 0">Drop your action here</span>
        </div>
        <div data-bind="visible: ! enableOozieDropOnAfter(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
      </div>
    </div>

    <div data-bind="template: { name: 'row-template', data: oozieEndRow }"></div>

    <div data-bind="template: { name: 'row-template', data: oozieKillRow }" style="margin-top: 60px"></div>
  </div>
</script>


<script type="text/html" id="internal-column-template">
  <div data-bind="css: klass(), style: {'minHeight': '50px !important', 'width': percWidth() + '%' }">
    <div class="container-fluid" data-bind="visible: $root.isEditing()">
      <div data-bind="visible: ! enableOozieDropOnBefore(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
      <div data-bind="visible: enableOozieDropOnBefore, css: {'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addDraggedWidget($data, true); widgetDraggedAdditionalHandler(_w); } }"></div>
    </div>
    <div data-bind="template: { name: 'internal-row-template', foreach: rows}">
    </div>
    <div class="container-fluid" data-bind="visible: $root.isEditing()">
      <div data-bind="visible: ! enableOozieDropOnAfter(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
      <div data-bind="visible: enableOozieDropOnAfter, css: {'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addDraggedWidget($data, false); widgetDraggedAdditionalHandler(_w); } }"></div>
    </div>
  </div>
</script>


<script type="text/html" id="row-template">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span4 offset4">
        <div data-bind="css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing},
          sortable: { template: 'widget-template', data: widgets, allowDrop: $root.isEditing() && widgets().length < 1, isEnabled: $root.isEditing() && widgets().length < 1,
          options: {'opacity': 0.7, 'placeholder': 'row-highlight', 'greedy': true,
              'stop': function(event, ui){},
              'helper': function(event){lastWindowScrollPosition = $(window).scrollTop(); var _par = $('<div>');_par.addClass('card card-widget');var _title = $('<h2>');_title.addClass('card-heading simple');_title.text($(event.toElement).text());_title.appendTo(_par);_par.height(80);_par.width(180);return _par;}},
              dragged: function(widget){widgetDraggedAdditionalHandler(widget)}}">
        </div>
      </div>
    </div>
  </div>
</script>

<script type="text/html" id="internal-row-template">
  <div class="container-fluid">
    <div class="row-fluid" data-bind="visible: $index() > 0 && $root.isEditing() && ! $root.isRowBeforeJoin($data) && ! $root.isRowAfterFork($data)" style="margin-bottom: 10px">
      <div data-bind="css: {'span1': true, 'offset3andhalf': ($root.isEditing() && $parents.length <= 2 && columns().length == 0), 'offset4': (!$root.isEditing() && $parents.length <= 2 && columns().length == 0), 'readonly': ! $root.isEditing()}"></div>
      <div data-bind="css: {'span10': ($parents.length > 2 || columns().length > 0), 'span4': ($parents.length <= 2 && columns().length == 0), 'offset3andhalf': (!$root.isEditing() && $parents.length <= 2 && columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div data-bind="visible: $root.isEditing() && ! enableOozieDropOnBefore(), css: {'drop-target drop-target-disabled': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}"></div>
        <div style="text-align: left" data-bind="visible: $root.isEditing() && enableOozieDropOnBefore(), css: {'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addDraggedWidget($data); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
      <div data-bind="css: {'span1': true, 'readonly': ! $root.isEditing()}"></div>
    </div>
    <div class="row-fluid" data-bind="style: {'width': columns().length < 5 ? '100%' : (columns().length * 25)+'%' }">
      <div data-bind="css: {'span1': true, 'offset3andhalf': ($root.isEditing() && $parents.length <= 2 && columns().length == 0), 'offset4': (!$root.isEditing() && $parents.length <= 2 && columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div data-bind="visible: $root.isEditing() && enableOozieDropOnSide() && !($data.widgets().length > 0 && ['join-widget', 'decision-widget'].indexOf($data.widgets()[0].widgetType()) > -1), css: {'drop-target drop-target-side': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addSideDraggedWidget($data, true); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
      <div  data-bind="css: {'span10': ($parents.length > 2 || columns().length > 0), 'span4': ($parents.length <= 2 && columns().length == 0), 'offset3andhalf': (!$root.isEditing() && $parents.length <= 2 && columns().length == 0), 'readonly': ! $root.isEditing()}">
        <div data-bind="visible: columns().length == 0, css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing},
          sortable: { template: 'widget-template', data: widgets, allowDrop: enableOozieDrop, isEnabled: enableOozieDrop,
          options: {'opacity': 0.7, 'placeholder': 'row-highlight', 'greedy': true,
              'stop': function(event, ui){},
              'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('<div>');_par.addClass('card card-widget');var _title = $('<h2>');_title.addClass('card-heading simple');_title.text($(event.toElement).text());_title.appendTo(_par);_par.height(80);_par.width(180);return _par;}},
              dragged: function(widget){widgetDraggedAdditionalHandler(widget)}}">
        </div>
        <div class="container-fluid" data-bind="visible: columns().length > 0">
          <div data-bind="css: {'row-fluid': true, 'row-container':true, 'is-editing': $root.isEditing}">
            <div data-bind="template: { name: 'internal-column-template', foreach: columns}">
            </div>
          </div>
        </div>
      </div>
      <div  data-bind="css: {'span1': true, 'readonly no-margin': ! $root.isEditing()}, style: {'margin': ! $root.isEditing() ? '0':''}">
        <div data-bind="visible: $root.isEditing() && enableOozieDropOnSide() && !($data.widgets().length > 0 && ['join-widget', 'decision-widget'].indexOf($data.widgets()[0].widgetType()) > -1), css: {'drop-target drop-target-side': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(){ var _w = $root.addSideDraggedWidget($data, false); widgetDraggedAdditionalHandler(_w); } }"></div>
      </div>
    </div>
  </div>

</script>

<script type="text/html" id="widget-template">
  <div data-bind="attr: {'id': 'wdg_'+ id(),}, css: klass() + (ooziePropertiesExpanded()?' expanded-widget':'') + ($root.isRunning() && status() == ''?' widget-running':''),
      draggable: {data: $data, isEnabled: true, options: {'handle': '.move-widget', 'opacity': 0.7, 'refreshPositions': true, 'start': function(event, ui){ $root.setCurrentlyDraggedWidget($data, event.toElement || event.originalEvent.originalEvent.target); $root.isDragging(true); if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', -$(window).scrollTop() ); } }, 'beforestop': function (event, ui) { if ($.browser.mozilla || $.browser.msie) { ui.helper.css('margin-top', 0 ); } }, 'stop': function(event, ui){ $root.enableSideDrop($data); $root.isDragging(false); }, 'helper': function(event){lastWindowScrollPosition = $(window).scrollTop();  var _par = $('<div>');_par.addClass('card card-widget');var _title = $('<h2>');_title.addClass('card-heading simple');_title.text($(event.currentTarget).find('h2 a.pointer').text());_title.appendTo(_par);_par.css('minHeight', '10px');_par.css('overflow', 'hidden');_par.width(180);return _par;}}}">
    <h2 class="card-heading simple" data-bind="visible: widgetType() != 'start-widget' && widgetType() != 'end-widget' &&
        id() != '17c9c895-5a16-7443-bb81-f34b30b21548' && (['fork-widget', 'join-widget', 'decision-widget'].indexOf(widgetType()) == -1 || $root.isEditing())">

      <span data-bind="visible: $root.isEditing() && oozieMovable() && ! oozieExpanded() && ! ooziePropertiesExpanded() && ($root.newAction() == null || $root.newAction().id() != id())">
        <a href="javascript:void(0)" class="move-widget" title="Move node"><i class="fa fa-arrows"></i></a>
        &nbsp;
        <a href="javascript:void(0)" class="move-widget clone-widget" title="Copy node"><i class="fa fa-copy"></i></a>
        &nbsp;
      </span>

      <!-- ko if: widgetType() == 'hive-widget' -->
      <img src="/static/oozie/art/icon_beeswax_48.4a8ff7e1505a.png" class="widget-icon">
      <!-- /ko -->

      <!-- ko if: widgetType() == 'hive2-widget' -->
      <img src="/static/oozie/art/icon_beeswax_48.4a8ff7e1505a.png" class="widget-icon"><sup style="color: #338bb8; margin-left: -4px">2</sup>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'pig-widget' -->
      <img src="/static/oozie/art/icon_pig_48.5484f0de2654.png" class="widget-icon">
      <!-- /ko -->

      <!-- ko if: widgetType() == 'java-widget' -->
      <a class="widget-icon"><i class="fa fa-file-code-o"></i></a>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'sqoop-widget' -->
      <img src="/static/oozie/art/icon_sqoop_48.6c259e89cd55.png" class="widget-icon">
      <!-- /ko -->

      <!-- ko if: widgetType() == 'mapreduce-widget' -->
      <a class="widget-icon"><i class="fa fa-file-archive-o"></i></a>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'subworkflow-widget' -->
      <a class="widget-icon"><i class="fa fa-code-fork"></i></a>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'shell-widget' -->
      <a class="widget-icon"><i class="fa fa-terminal"></i></a>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'ssh-widget' -->
      <a class="widget-icon"><i class="fa fa-tty"></i></a>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'fs-widget' -->
      <a class="widget-icon"><i class="fa fa-file-o"></i></a>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'email-widget' -->
      <a class="widget-icon"><i class="fa fa-envelope-o"></i></a>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'streaming-widget' -->
      <a class="widget-icon"><i class="fa fa-exchange"></i></a>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'distcp-widget' -->
      <a class="widget-icon"><i class="fa fa-files-o"></i></a>
      <!-- /ko -->

      <!-- ko if: widgetType() == 'spark-widget' -->
      <img src="/static/oozie/art/icon_spark_48.df62ab14a3f0.png" class="widget-icon">
      <!-- /ko -->

      <!-- ko if: widgetType() == 'kill-widget' -->
      <a class="widget-icon"><i class="fa fa-stop"></i></a>
      <!-- /ko -->

      <span data-bind="visible: typeof $root.isViewer == 'undefined' || ! $root.isViewer(), editable: name, editableOptions: {enabled: $root.isEditing(), placement: 'right'}, attr: {'title': id().slice(0, 4)}"></span>
      <a class="pointer" data-bind="visible: typeof $root.isViewer != 'undefined' && $root.isViewer(), click: function(){ location.href = actionURL(); }, text: name" title="View workflow action"></a>

      <!-- ko if: widgetType() == 'decision-widget' -->
        <div class="inline pull-right" data-bind="visible: $root.isEditing() && $root.workflow.getNodeById(id()) && $root.workflow.getNodeById(id()).children().length <= 1 && ! oozieExpanded() && ! ooziePropertiesExpanded()">
          <a href="javascript:void(0)" data-bind="click: function(w){addActionDemiModalFieldCancel();$root.removeWidget(w);}"><i class="fa fa-times"></i></a>
        </div>
      <!-- /ko -->
      <!-- ko if: widgetType() != 'decision-widget' -->
        <div class="inline pull-right" data-bind="visible: $root.isEditing() && (['start-widget', 'end-widget', 'fork-widget', 'join-widget'].indexOf(widgetType()) == -1) && ! oozieExpanded() && ! ooziePropertiesExpanded()">
          <a href="javascript:void(0)" data-bind="click: function(w){addActionDemiModalFieldCancel();$root.removeWidget(w);}"><i class="fa fa-times"></i></a>
        </div>
      <!-- /ko -->
      <!-- ko if: ooziePropertiesExpanded() -->
        <div class="inline pull-right">
          <a href="javascript:void(0)" data-bind="click: toggleProperties"><i class="fa fa-caret-square-o-left"></i></a>
        </div>
      <!-- /ko -->
    </h2>
    <div class="card-body" style="padding: 0; position: relative">
      <div class="advanced-triangle-container" data-bind="visible: $root.isEditing() && ! ooziePropertiesExpanded() && oozieMovable(), click: toggleProperties">
        <div class="advanced-triangle">
          <a href="javascript:void(0)"><i class="fa fa-cogs"></i></a>
        </div>
      </div>
      <!-- ko if: id() == '17c9c895-5a16-7443-bb81-f34b30b21548' && ooziePropertiesExpanded() -->
      <div class="advanced-triangle-container" data-bind="visible: $root.isEditing(), click: toggleProperties">
        <div class="advanced-triangle">
          <a href="javascript:void(0)"><i class="fa fa-caret-square-o-left"></i></a>
        </div>
      </div>
      <!-- /ko -->
      <div data-bind="template: { name: function() { return widgetType(); }}" class="widget-main-section"></div>
      <div data-bind="css: {'widget-statusbar': true, 'widget-statusbar-running': status() == 'running', 'widget-statusbar-failed': status() == 'failed', 'widget-statusbar-success': status() == 'success'}, style: {'width': progress() + '%'}"></div>
    </div>
  </div>
</script>


<script type="text/html" id="fork-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="min-height: 40px">
    <div class="big-icon"><i class="fa fa-sitemap"></i></div>
    <div data-bind="visible: $root.isEditing" style="padding-left: 10px; padding-bottom: 10px">
      <a class="pointer" data-bind="click: function() { $root.convertToDecision($parent, $data) }">Convert to Decision <i class="fa fa-wrench"></i></a>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="join-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="min-height: 40px">
    <div class="big-icon"><i class="fa fa-sitemap fa-rotate-180"></i></div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="decision-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="min-height: 40px">
    <div class="big-icon" data-bind="visible: ! $root.isEditing()"><i class="fa fa-magic"></i></div>

    <div data-bind="visible: $root.isEditing" style="padding: 10px">
      <a class="custom-popover pull-right" href="javascript:void(0)" target="_blank" data-trigger="click" data-toggle="popover" data-placement="right" rel="popover"
        data-html="true" data-content="<strong>Examples of predicates:</strong><br/>
                <br/>${ fs:fileSize(secondjobOutputDir) gt 10 * GB }
                <br/>
                ${ hadoop:counters('secondjob')[RECORDS][REDUCE_OUT] lt 1000000 }
                <br/>
                <a href='http://oozie.apache.org/docs/4.1.0/WorkflowFunctionalSpec.html#a4.2_Expression_Language_Functions'>Click for more</a>">
          <i class="fa fa-question-circle" title="Click for more info"></i>
      </a>
      <ul data-bind="foreach: children" class="unstyled">
        <li>
          If <input type="text" data-bind="value: $data['condition']" />
          go to
          <select data-bind="options: $root.workflow.nodeIds,
                     optionsText: function(item) {return $root.workflow.nodeNamesMapping()[item]; },
                     value: $data['to']
                     ">
          </select>
          <a class="pointer" data-bind="click: function(){ $parent.children.remove(this);}">
            <i class="fa fa-minus"></i>
          </a>
        </li>
      </ul>
      <a class="pointer" data-bind="click: function(){ children.push({'to': '', 'condition': '${ 1 gt 0 }'});}">
        Jump to another node <i class="fa fa-plus"></i>
      </a>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="kill-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="min-height: 40px">
    <div class="big-icon" data-bind="visible: id() == '17c9c895-5a16-7443-bb81-f34b30b21548'" title="It is where we finish if failure!"><i class="fa fa-stop"></i></div>

    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: $parent.ooziePropertiesExpanded">
        <h6 class="field-title">Message</h6>
        <textarea class="span12" data-bind="value: properties.message" />
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="start-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="min-height: 40px;">
    <div class="big-icon" title="It is where we start!"><i class="fa fa-flag-o"></i></div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="end-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="min-height: 40px">
    <div class="big-icon" title="It is where we successfully finish!"><i class="fa fa-flag-checkered"></i></div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="common-action-properties">
  <div class="properties">
    <h6>Prepare</h6>
    <ul data-bind="visible: properties.prepares().length > 0, foreach: properties.prepares" class="unstyled">
      <li>
        <div style="display: inline-block; width: 60px" data-bind="text: type"></div>
        <input type="text" class="filechooser-input input-xlarge"
            data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.prepares.help_text }"/>
        <a href="#" data-bind="click: function(){ $parent.properties.prepares.remove(this); $(document).trigger('drawArrows') }">
          <i class="fa fa-minus"></i>
        </a>
      </li>
    </ul>
    <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'mkdir', 'value': ''}); $(document).trigger('drawArrows') }">
      Directory <i class="fa fa-plus"></i>
    </a>
    <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'delete', 'value': ''}); $(document).trigger('drawArrows') }">
      Delete <i class="fa fa-plus"></i>
    </a>

    <!-- ko if: properties.job_xml -->
      <h6>Job XML</h6>
      <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: properties.job_xml, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.job_xml, attr: { placeholder: $root.workflow_properties.job_xml.help_text }"/>
    <!-- /ko -->

    <h6>
      <a class="pointer" data-bind="click: function(){ properties.job_properties.push({'name': '', 'value': ''}); $(document).trigger('drawArrows') }">
        Properties <i class="fa fa-plus"></i>
      </a>
    </h6>
    <ul data-bind="visible: properties.job_properties().length > 0, foreach: properties.job_properties" class="unstyled">
      <li>
        <input type="text" data-bind="value: name" placeholder="name, e.g. mapred.job.queue.name"/>
        <input type="text" class="filechooser-input input-xlarge" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.job_properties.help_text }"/>
        <a href="#" data-bind="click: function(){ $parent.properties.job_properties.remove(this); $(document).trigger('drawArrows') }">
          <i class="fa fa-minus"></i>
        </a>
      </li>
    </ul>
    <em data-bind="visible: properties.job_properties().length == 0">No properties defined.</em>

    <!-- ko if: properties.archives -->
    <h6>
      <a class="pointer" data-bind="click: function(){ properties.archives.push(ko.mapping.fromJS({'name': ''})); $(document).trigger('drawArrows') }">
        Archives <i class="fa fa-plus"></i>
      </a>
    </h6>
    <ul data-bind="visible: properties.archives().length > 0, foreach: properties.archives" class="unstyled">
      <li>
        <input type="text" class="filechooser-input input-xlarge" data-bind="filechooser: name(), filechooserFilter: 'zip,tar,tgz,tar.gz', filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: name, value: name, attr: { placeholder: $root.workflow_properties.archives.help_text }"/>
        <span data-bind='template: { name: "common-fs-link", data: { path: name(), with_label: false} }'></span>
        <a href="#" data-bind="click: function(){ $parent.properties.archives.remove(this); $(document).trigger('drawArrows') }">
          <i class="fa fa-minus"></i>
        </a>
      </li>
    </ul>
    <em data-bind="visible: properties.archives().length == 0">No archives defined.</em>
    <!-- /ko -->
  </div>
</script>


<script type="text/html" id="common-properties-pig-arguments">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.arguments.push({'value': ''}); $(document).trigger('drawArrows') }">
      Arguments <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="visible: properties.arguments().length > 0, foreach: properties.arguments">
    <li>
      <input type="text" class="input-medium" data-bind="value: value, attr: { placeholder: $root.workflow_properties.arguments.help_text }"/>
      <a href="#" data-bind="click: function(){ $parent.properties.arguments.remove(this); $(document).trigger('drawArrows') }">
        <i class="fa fa-minus"></i>
      </a>
    </li>
  </ul>
  <em data-bind="visible: properties.arguments().length == 0">No arguments defined.</em>
</script>


<script type="text/html" id="common-properties-arguments">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.arguments.push({'value': ''}); $(document).trigger('drawArrows') }">
      Arguments <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="visible: properties.arguments().length > 0, foreach: properties.arguments">
    <li style="margin-bottom: 3px">
      <input type="text" class="span11" data-bind="value: value, attr: { placeholder: $root.workflow_properties.arguments.help_text }"/>
      <a href="#" data-bind="click: function(){ $parent.properties.arguments.remove(this); $(document).trigger('drawArrows') }">
        <i class="fa fa-minus"></i>
      </a>
    </li>
  </ul>
</script>


<script type="text/html" id="common-properties-files">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.files.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows') }">
      Files <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="foreach: properties.files">
    <li style="margin-bottom: 3px">
      <input type="text" class="filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value"/>
      <span data-bind='template: { name: "common-fs-link", data: { path: value(), with_label: false} }'></span>
      <a href="#" data-bind="click: function(){ $parent.properties.files.remove(this); $(document).trigger('drawArrows') }">
        <i class="fa fa-minus"></i>
      </a>
    </li>
  </ul>
</script>


<script type="text/html" id="common-properties-parameters">
  <h6>
    <a class="pointer" data-bind="click: function(){ properties.parameters.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows')}">
      Parameters <i class="fa fa-plus"></i>
    </a>
  </h6>
  <ul class="unstyled" data-bind="foreach: properties.parameters">
    <li style="margin-bottom: 3px">
      <input type="text" class="filechooser-input seventy" data-bind="value: value, filechooser: value, filechooserOptions: globalFilechooserOptions, filechooserPrefixSeparator: '=', hdfsAutocomplete: value, attr: { placeholder: ' Fill me up!' }, typeahead: { target: value, source: $parent.actionParametersUI, sourceSuffix: '=', triggerOnFocus: true }"/>
      <span data-bind='template: { name: "param-fs-link", data: {path: value()} }'></span>
      <a href="#" data-bind="click: function(){ $parent.properties.parameters.remove(this); $(document).trigger('drawArrows') }">
        <i class="fa fa-minus"></i>
      </a>
    </li>
  </ul>
</script>


<script type="text/html" id="common-action-transition">
  <!-- ko if: children().length == 2 -->
  OK -->
  <select data-bind="options: $root.workflow.nodeIds,
      optionsText: function(item) {return $root.workflow.nodeNamesMapping()[item]; },
      value: children()[0]['to']
      ">
  </select>
  <br/>
  KO -->
  <select data-bind="options: $root.workflow.nodeIds,
     optionsText: function(item) {return $root.workflow.nodeNamesMapping()[item]; },
   value: children()[1]['error']
     ">
  </select>
  <!-- /ko -->
</script>


<script type="text/html" id="common-action-credentials">
  <em data-bind="visible: $root.credentials() == null || $root.credentials().length == 0">No available credentials.</em>
  <select data-bind="visible: $root.credentials() != null && $root.credentials().length > 0, options: $root.credentials, selectedOptions: properties.credentials" size="5" multiple="true"></select>

  <em data-bind="visible: properties.credentials && properties.credentials.indexOf('hbase') != -1">
    Requires hbase-site.xml in job path
  </em>
</script>


<script type="text/html" id="common-action-sla">
  <div data-bind="with: properties">
     
  <div data-bind="foreach: { 'data': sla, 'afterRender': addSLATextAndPlaceholder }">
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' -->
      <label class="checkbox" style="text-align: left"><span class="control-label"></span> <input type="checkbox" data-bind="checked: value"/></label>
      <!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' && item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left"></label>
      <div class="controls">
        <input type="text" data-bind="value: value" class="span7">
      </div>
      </span>
      <!-- /ko -->
    </div>
  </div>

  </div>
</script>


<script type="text/html" id="common-fs-link">
<!-- ko if: $data.path.length > 0 -->
  <!-- ko if: with_label -->
    <a data-bind="attr: {href: '/filebrowser/view' + ($data.path.indexOf('/') == -1 ? $root.workflow.properties.deployment_dir() + '/' : '') + $data.path , title: 'Open '+ $data.path }" target="_blank">
      <span data-bind="text: $data.path.lastIndexOf('/') == $data.path.length - 1 ? $data.path : $data.path.split('/').pop()"></span>
    </a>
  <!-- /ko -->

   <!-- ko if: ! with_label -->
     <a data-bind="attr: {href: '/filebrowser/view' + ($data.path.indexOf('/') == -1 ? $root.workflow.properties.deployment_dir() + '/' : '') + $data.path }" target="_blank" title="Open">
       <i class="fa fa-external-link-square"></i>
     </a>
   <!-- /ko -->
 <!-- /ko -->
</script>


<script type="text/html" id="param-fs-link">
  <!-- ko if: path.split('=', 2)[1] && path.split('=', 2)[1].charAt(0) == '/' -->
    <a data-bind="attr: {href: '/filebrowser/view' + $data.path.split('=', 2)[1] }" target="_blank" title="Open">
      <i class="fa fa-external-link-square"></i>
    </a>
  <!-- /ko -->
</script>

<script type="text/html" id="logs-icon">
  <!-- ko if: $parent.logsURL() != '' && $parent.logsURL() != null -->
    <a class="pull-right pointer logs-icon" data-bind="click: function(){ location.href = $parent.logsURL(); }" title="View logs"><i class="fa fa-tasks"></i></a>
  <!-- /ko -->
</script>


<script type="text/html" id="hive-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind='template: { name: "common-fs-link", data: {path: properties.script_path(), with_label: true} }'></span>
    </div>

    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <input type="text" style="width:25%" class="filechooser-input" data-bind="filechooser: properties.script_path, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.script_path, attr: { placeholder:  $root.workflow_properties.script_path.help_text }"/>
        <span data-bind='template: { name: "common-fs-link", data: {path: properties.script_path(), with_label: false}}'></span>

        &nbsp;&nbsp;

        <span data-bind="text: $root.workflow_properties.hive_xml.label"></span>
        <input type="text" style="width:25%" class="input-large filechooser-input" data-bind="filechooser: properties.hive_xml, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.hive_xml, attr: { placeholder: $root.workflow_properties.hive_xml.help_text }"/>

        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-parameters' }"></div>
          <div class="span6" data-bind="template: { name: 'common-properties-files' }"></div>
        </div>
      </div>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="template: { name: 'common-action-properties' }"></span>
          <br/>
          <br/>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="hive2-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind='template: { name: "common-fs-link", data: {path: properties.script_path(), with_label: true} }'></span>
    </div>

    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <input type="text" class="filechooser-input" data-bind="filechooser: properties.script_path, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.script_path, attr: { placeholder:  $root.workflow_properties.script_path.help_text }"/>
        <span data-bind='template: { name: "common-fs-link", data: {path: properties.script_path(), with_label: false}}'></span>

        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-parameters' }"></div>
          <div class="span6" data-bind="template: { name: 'common-properties-files' }"></div>
        </div>
      </div>
    </div>


    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="text: $root.workflow_properties.jdbc_url.label"></span>
          <input type="text" data-bind="value: properties.jdbc_url, attr: { placeholder: $root.workflow_properties.jdbc_url.help_text }" />
          <br/>
          <span data-bind="text: $root.workflow_properties.password.label"></span>
          <input type="text" data-bind="value: properties.password, attr: { placeholder: $root.workflow_properties.password.help_text }" />
          <br/>
          <span data-bind="template: { name: 'common-action-properties' }"></span>
          <br/>
          <br/>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="pig-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind='template: { name: "common-fs-link", data: {path: properties.script_path(), with_label: true} }'></span>
    </div>

    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <input type="text" class="filechooser-input" data-bind="filechooser: properties.script_path, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.script_path, attr: { placeholder:  $root.workflow_properties.script_path.help_text }" />
        <span data-bind='template: { name: "common-fs-link", data: {path: properties.script_path(), with_label: false}}'></span>

        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-parameters' }"></div>
          <div class="span6" data-bind="template: { name: 'common-properties-files' }"></div>
        </div>

      </div>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="template: { name: 'common-properties-pig-arguments' }"></span>
          <br/>
          <span data-bind="template: { name: 'common-action-properties' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="spark-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind="text: properties.app_name" />
      &nbsp;&nbsp;&nbsp;
      <span data-bind="text: properties.spark_master" />
      <span data-bind="text: properties.mode" />
      <br/>
      <span data-bind="text: properties.jars" />
      <span data-bind="text: properties.class" />
    </div>

    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">

        <div class="row-fluid">
          <div class="span6">
            <span data-bind="text: $root.workflow_properties.spark_master.label" style="display: inline-block"></span>
            <input type="text" class="input-medium" data-bind="value: properties.spark_master, attr: { placeholder: $root.workflow_properties.spark_master.help_text }" />
          </div>
          <div class="span6">
            <span data-bind="text: $root.workflow_properties.mode.label" style="display: inline-block"></span>
            <input type="text" class="input-medium" data-bind="value: properties.mode, attr: { placeholder: $root.workflow_properties.mode.help_text }" />
          </div>
        </div>

        <span data-bind="text: $root.workflow_properties.app_name.label" style="display: inline-block; width: 75px"></span>
        <input type="text" class="input-xlarge" data-bind="value: properties.app_name, attr: { placeholder: $root.workflow_properties.app_name.help_text }" />

        <br/>

        <span data-bind="text: $root.workflow_properties.jars.label" style="display: inline-block; width: 75px"></span>
        <input type="text" class="filechooser-input" data-bind="filechooser: properties.jars, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.jars, attr: { placeholder:  $root.workflow_properties.jars.help_text }" />
        <span data-bind='template: { name: "common-fs-link", data: {path: properties.jars(), with_label: false}}'></span>

        <br/>

        <span data-bind="text: $root.workflow_properties.class.label" style="display: inline-block; width: 75px"></span>
        <input type="text" class="input-xlarge" data-bind="value: properties.class, attr: { placeholder: $root.workflow_properties.class.help_text }" />

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.spark_arguments.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows') }">
            Arguments <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul class="unstyled" data-bind="visible: properties.spark_arguments().length > 0, foreach: properties.spark_arguments">
          <li>
            <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, attr: { placeholder:  $root.workflow_properties.spark_arguments.help_text }" />
            <span data-bind='template: { name: "common-fs-link", data: {path: value, with_label: false}}'></span>
            <a href="#" data-bind="click: function(){ $parent.properties.spark_arguments.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
       </ul>
       <em data-bind="visible: properties.spark_arguments().length == 0">No arguments defined.</em>
      </div>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="text: $root.workflow_properties.spark_opts.label" style="display: inline-block; width: 75px"></span>
          <input type="text" class="input-xlarge" data-bind="value: properties.spark_opts, attr: { placeholder: $root.workflow_properties.spark_opts.help_text }" />

          <br/>
          <span data-bind="template: { name: 'common-action-properties' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="java-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind="text: properties.main_class" />
    </div>

    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <span data-bind="text: $root.workflow_properties.jar_path.label" style="display: inline-block; width: 75px"></span>
        <input type="text" class="filechooser-input input-xlarge"
            data-bind="filechooser: properties.jar_path, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.jar_path, attr: { placeholder: $root.workflow_properties.jar_path.help_text }"
        />
        <span data-bind='template: { name: "common-fs-link", data: {path: properties.jar_path(), with_label: false}}'></span>

        <br/>
        <span data-bind="text: $root.workflow_properties.main_class.label" style="display: inline-block; width: 75px"></span>
        <input type="text" class="input-xlarge" data-bind="value: properties.main_class, attr: { placeholder: $root.workflow_properties.main_class.help_text }" />

        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-arguments' }"></div>
          <div class="span6" data-bind="template: { name: 'common-properties-files' }"></div>
        </div>

      </div>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <h6>
            <a class="pointer" data-bind="click: function(){ properties.java_opts.push({'value': ''}); }">
              <span data-bind="text: $root.workflow_properties.java_opts.label"></span> <i class="fa fa-plus"></i>
            </a>
          </h6>
          <ul class="unstyled" data-bind="foreach: properties.java_opts">
            <li>
              <input type="text" data-bind="value: value, attr: { placeholder: $root.workflow_properties.java_opts.help_text }" class="input-xlarge"/>
              <a href="#" data-bind="click: function(){ $parent.properties.java_opts.remove(this); }">
                <i class="fa fa-minus"></i>
              </a>
            </li>
          </ul>

          <span data-bind="text: $root.workflow_properties.capture_output.label"></span>
          <input type="checkbox" data-bind="checked: properties.capture_output" />
          <br/>
          <br/>

          <span data-bind="template: { name: 'common-action-properties' }"></span>
          <br/>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="sqoop-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">
    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <span data-bind="text: $root.workflow_properties.command.label"></span>
        <input type="text" data-bind="value: properties.command" />

        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-parameters' }"></div>
          <div class="span6" data-bind="template: { name: 'common-properties-files' }"></div>
        </div>
      </div>
    </div>

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <a href="javascript:void(0)">
        <span type="text" data-bind="text: properties.command().slice(0, 70), attr: { title: properties.command() }" />...
      </a>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="template: { name: 'common-action-properties' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="mapreduce-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">
    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <span data-bind="text: $root.workflow_properties.jar_path.label"></span>
        <input type="text" class="filechooser-input" data-bind="filechooser: properties.jar_path, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.jar_path, value: properties.jar_path" />
        <span data-bind='template: { name: "common-fs-link", data: {path: properties.jar_path(), with_label: false} }'></span>

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.job_properties.push({'name': '', 'value': ''}); $(document).trigger('drawArrows') }">
            Properties <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="visible: properties.job_properties().length > 0, foreach: properties.job_properties" class="unstyled">
          <li>
            <input type="text" class="span4" data-bind="value: name" placeholder="name, e.g. mapred.job.queue.name"/>
            <input type="text" class="filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.job_properties.help_text }"/>
            <a href="#" data-bind="click: function(){ $parent.properties.job_properties.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>

        <div class="span12" data-bind="template: { name: 'common-properties-files' }"></div>
      </div>
    </div>

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind='template: { name: "common-fs-link", data: {path: properties.jar_path(), with_label: true} }'></span>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
      <div class="properties">
        <h6>Prepare</h6>
        <ul data-bind="visible: properties.prepares().length > 0, foreach: properties.prepares" class="unstyled">
          <li>
            <div style="display: inline-block; width: 60px" data-bind="text: type"></div>
            <input type="text" class="filechooser-input input-xlarge"
                data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.prepares.help_text }"/>
            <a href="#" data-bind="click: function(){ $parent.properties.prepares.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>
        <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'mkdir', 'value': ''}); $(document).trigger('drawArrows') }">
          Directory <i class="fa fa-plus"></i>
        </a>
        <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'delete', 'value': ''}); $(document).trigger('drawArrows') }">
          Delete <i class="fa fa-plus"></i>
        </a>

        <!-- ko if: properties.job_xml -->
          <h6>Job XML</h6>
          <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: properties.job_xml, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: properties.job_xml, attr: { placeholder: $root.workflow_properties.job_xml.help_text }"/>
        <!-- /ko -->

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.archives.push(ko.mapping.fromJS({'name': ''})); $(document).trigger('drawArrows') }">
            Archives <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="visible: properties.archives().length > 0, foreach: properties.archives" class="unstyled">
          <li>
            <input type="text" class="filechooser-input input-xlarge" data-bind="filechooser: name(), filechooserFilter: 'zip,tar,tgz,tar.gz', filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: name, value: name, attr: { placeholder: $root.workflow_properties.archives.help_text }"/>
            <span data-bind='template: { name: "common-fs-link", data: { path: name(), with_label: false} }'></span>
            <a href="#" data-bind="click: function(){ $parent.properties.archives.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>
        <em data-bind="visible: properties.archives().length == 0">No archives defined.</em>
      </div>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="subworkflow-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">
    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <select data-bind="options: $root.subworkflows, optionsText: 'name', optionsValue: 'value', value: properties.workflow"></select>
        <span data-bind="visible: properties.workflow().length > 0">
          <a href="#" data-bind="attr: { href: '/oozie/editor/workflow/edit/' + '?workflow=' + properties.workflow() }" target="_blank" title="Open">
            <i class="fa fa-external-link-square"></i>
          </a>
        </span>

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.job_properties.push(ko.mapping.fromJS({'name': '', 'value': ''})); $(document).trigger('drawArrows') }">
            Properties <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="visible: properties.job_properties().length > 0, foreach: properties.job_properties" class="unstyled">
          <li>
            <input type="text" data-bind="value: name" placeholder="Name, e.g. input"/>

            <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, attr: { placeholder:  $root.workflow_properties.job_properties.help_text }" />
            <span data-bind='template: { name: "common-fs-link", data: {path: value, with_label: false}}'></span>

            <a href="#" data-bind="click: function(){ $parent.properties.job_properties.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
             </a>
           </li>
         </ul>
        <em data-bind="visible: properties.job_properties().length == 0">No properties defined.</em>

      </div>
    </div>

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <!-- ko if: $root.getSubWorkflow(properties.workflow()) -->
        <span data-bind="with: $root.getSubWorkflow(properties.workflow())">
          <a href="#" data-bind="attr: { href: '/oozie/editor/workflow/edit/' + '?workflow=' + $data.value() }" target="_blank" title="Open">
            <span data-bind="text: $data.name"></span>
          </a>
        </span>
      <!-- /ko -->
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="text: $root.workflow_properties.propagate_configuration.label"></span>
          <input type="checkbox" data-bind="checked: properties.propagate_configuration" />
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="shell-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">
    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <input type="text" data-bind="value: properties.shell_command" />
        <span data-bind='template: { name: "common-fs-link", data: {path: properties.shell_command(), with_label: false} }'></span>

        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-arguments' }"></div>
          <div class="span6" data-bind="template: { name: 'common-properties-files' }"></div>
        </div>
      </div>
    </div>

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind="template: { name: 'common-fs-link', data: {path: properties.shell_command(), with_label: true} }"></span>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="text: $root.workflow_properties.capture_output.label"></span>
          <input type="checkbox" data-bind="checked: properties.capture_output" />
          <br/>

          <h6>
            <a class="pointer" data-bind="click: function(){ properties.env_var.push({'value': ''}); }">
              <span data-bind="text: $root.workflow_properties.env_var.label"></span> <i class="fa fa-plus"></i>
            </a>
          </h6>
          <ul data-bind="foreach: properties.env_var" class="unstyled">
            <li>
              <input type="text" class="input-xlarge" data-bind="value: value, attr: { placeholder: $root.workflow_properties.env_var.help_text }"/>
              <a href="#" data-bind="click: function(){ $parent.properties.env_var.remove(this); }">
                <i class="fa fa-minus"></i>
              </a>
            </li>
          </ul>

          <span data-bind="template: { name: 'common-action-properties' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="ssh-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">
    <div data-bind="visible: $root.isEditing">

      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <span data-bind="text: $root.workflow_properties.host.label"></span>
        <input type="text" data-bind="value: properties.host" />
        <br/>

        <span data-bind="text: $root.workflow_properties.ssh_command.label"></span>
        <input type="text" data-bind="value: properties.ssh_command" />
        <div class="row-fluid">
          <div class="span6" data-bind="template: { name: 'common-properties-arguments' }"></div>
        </div>
      </div>
    </div>

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind="text: properties.host" />
      <span data-bind="text: properties.ssh_command().slice(0, 75)" />
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="text: $root.workflow_properties.capture_output.label"></span>
          <input type="checkbox" data-bind="checked: properties.capture_output" />
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="fs-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind="text: 'Delete', visible: properties.deletes().length > 0"></span>
      <ul data-bind="foreach: properties.deletes" class="unstyled">
        <li>
          <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: true} }, visible: value().length > 0'></span>
        </li>
      </ul>

      <span data-bind="text: 'Create', visible: properties.mkdirs().length > 0 || properties.touchzs().length > 0"></span>
      <ul data-bind="foreach: properties.mkdirs" class="unstyled">
        <li>
          <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: true} }, visible: value().length > 0'></span>
        </li>
      </ul>
      <ul data-bind="foreach: properties.touchzs" class="unstyled">
        <li>
          <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: true} }, visible: value().length > 0'></span>
        </li>
      </ul>

      <span data-bind="text: 'Move', visible: properties.moves().length > 0"></span>
      <ul data-bind="foreach: properties.moves" class="unstyled">
        <li>
          <span data-bind='template: { name: "common-fs-link", data: {path: source(), with_label: true} }, visible: source().length > 0'></span>
          to
          <span data-bind='template: { name: "common-fs-link", data: {path: destination(), with_label: true} }, visible: destination().length > 0'></span>
        </li>
      </ul>

      <span data-bind="text: 'Change permissions', visible: properties.chmods().length > 0"></span>
      <ul data-bind="foreach: properties.chmods" class="unstyled">
        <li>
          <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: true} }, visible: value().length > 0'></span>
          to
          <span data-bind="text: permissions"/>
          <span data-bind="visible: ! dir_files(), text: 'for directories'"/>
          <span data-bind="visible: dir_files(), text: 'for directories and files'"/>
          <span data-bind="visible: recursive, text: 'recursivelt'"/>
        </li>
      </ul>

      <span data-bind="text: 'Change groups', visible: properties.chgrps().length > 0"></span>
      <ul data-bind="foreach: properties.chgrps" class="unstyled">
        <li>
          <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: true} }, visible: value().length > 0'></span>
          to
          <span data-bind="text: group"/>
          <span data-bind="visible: ! dir_files(), text: 'for directories'"/>
          <span data-bind="visible: dir_files(), text: 'for directories and files'"/>
          <span data-bind="visible: recursive, text: 'recursively'"/>
        </li>
      </ul>
    </div>


    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <h6>
          <a class="pointer" data-bind="click: function(){ properties.deletes.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows') }">
            <span data-bind="text: $root.workflow_properties.deletes.label"></span> <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="foreach: properties.deletes" class="unstyled">
          <li>
            <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.deletes.help_text }"/>
            <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: false} }, visible: value().length > 0'></span>
            <a href="#" data-bind="click: function(){ $parent.properties.deletes.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.mkdirs.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows') }">
            <span data-bind="text: $root.workflow_properties.mkdirs.label"></span> <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="foreach: properties.mkdirs" class="unstyled">
          <li>
            <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.mkdirs.help_text }"/>
            <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: false} }, visible: value().length > 0'></span>
            <a href="#" data-bind="click: function(){ $parent.properties.mkdirs.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.touchzs.push(ko.mapping.fromJS({'value': ''})); $(document).trigger('drawArrows') }">
            <span data-bind="text: $root.workflow_properties.touchzs.label"></span> <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="foreach: properties.touchzs" class="unstyled">
          <li>
            <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.touchzs.help_text }"/>
            <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: false} }, visible: value().length > 0'></span>
            <a href="#" data-bind="click: function(){ $parent.properties.touchzs.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.moves.push(ko.mapping.fromJS({'source': '', 'destination': ''})); $(document).trigger('drawArrows') }">
            <span data-bind="text: $root.workflow_properties.moves.label"></span> <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="foreach: properties.moves" class="unstyled">
          <li>
            <input type="text" class="filechooser-input thirty" data-bind="filechooser: source, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: source, value: source" placeholder="Source path"/>
            <span data-bind='template: { name: "common-fs-link", data: {path: source(), with_label: false} }, visible: source().length > 0'></span>

            <input type="text" class="filechooser-input thirty" data-bind="filechooser: destination, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: destination, value: destination" placeholder="New destination path"/>
            <span data-bind='template: { name: "common-fs-link", data: {path: destination(), with_label: false} }, visible: destination().length > 0'></span>
            <a href="#" data-bind="click: function(){ $parent.properties.moves.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>

      </div>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.chmods.push(ko.mapping.fromJS({'value': '', 'permissions': '755', 'dir_files': false, 'recursive': false})); }">
            <span data-bind="text: $root.workflow_properties.chmods.label"></span> <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="foreach: properties.chmods" class="unstyled">
          <li>
            <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.chmods.help_text }"/>
            <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: false} }, visible: value().length > 0'></span>

            <input type="text" class="input-small" data-bind="value: permissions" placeholder="755, -rwxrw-rw-"/>
            Only for directories
            <input type="checkbox" data-bind="checked: dir_files"/>
            Recursive to sub directories
            <input type="checkbox" data-bind="checked: recursive"/>
            <a href="#" data-bind="click: function(){ $parent.properties.chmods.remove(this); }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.chgrps.push(ko.mapping.fromJS({'value': '', 'group': '', 'dir_files': false, 'recursive': false})); }">
            <span data-bind="text: $root.workflow_properties.chgrps.label"></span> <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="foreach: properties.chgrps" class="unstyled">
          <li>
            <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.chgrps.help_text }"/>
            <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: false} }, visible: value().length > 0'></span>

            <input type="text" class="input-small" data-bind="value: group" placeholder="e.g. newgroup"/>
            Only for directories
            <input type="checkbox" data-bind="checked: dir_files"/>
            Recursive to sub directories
            <input type="checkbox" data-bind="checked: recursive"/>
            <a href="#" data-bind="click: function(){ $parent.properties.chgrps.remove(this); }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>

        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="email-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">
    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <span data-bind="text: $root.workflow_properties.to.label" style="display: inline-block; width: 80px"></span>
        <input type="text" data-bind="value: properties.to, attr: { placeholder: $root.workflow_properties.to.help_text }" />
        <br/>

        <span data-bind="text: $root.workflow_properties.subject.label" style="display: inline-block; width: 80px"></span>
        <input type="text" data-bind="value: properties.subject, attr: { placeholder: $root.workflow_properties.subject.help_text }" />
        <br/>

        <span data-bind="text: $root.workflow_properties.body.label" style="display: inline-block; width: 80px"></span>
        <textarea data-bind="value: properties.body, attr: { placeholder: $root.workflow_properties.body.help_text }"></textarea>
      </div>
    </div>

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      To
      <span data-bind="text: properties.to"/>
      <br/>
      About
      <span data-bind="text: properties.subject"/>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="text: $root.workflow_properties.cc.label"></span>
          <input type="text" data-bind="value: properties.cc, attr: { placeholder: $root.workflow_properties.cc.help_text }" />
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="streaming-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">
    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">
        <ul class="unstyled">
          <li>
            <span data-bind="text: $root.workflow_properties.mapper.label"></span>
            <input type="text" data-bind="value: properties.mapper" />
            <span data-bind='template: { name: "common-fs-link", data: {path: properties.mapper(), with_label: false} }'></span>
          </li>
          <li>
            <span data-bind="text: $root.workflow_properties.reducer.label"></span>
            <input type="text" data-bind="value: properties.reducer" />
            <span data-bind='template: { name: "common-fs-link", data: {path: properties.reducer(), with_label: false} }'></span>
          </li>
        </ul>
        <div data-bind="template: { name: 'common-properties-files' }"></div>
      </div>
    </div>

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      <span data-bind="text: $root.workflow_properties.mapper.label, visible: properties.mapper().length > 0"></span>
      <span data-bind='template: { name: "common-fs-link", data: {path: properties.mapper(), with_label: true} }, visible: properties.mapper().length > 0'></span>
      <br/>
      <span data-bind="text: $root.workflow_properties.reducer.label, visible: properties.reducer().length > 0"></span>
      <span data-bind='template: { name: "common-fs-link", data: {path: properties.reducer(), with_label: true} }, visible: properties.reducer().length > 0'></span>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">
          <span data-bind="template: { name: 'common-action-properties' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="distcp-widget">
  <!-- ko if: $root.workflow.getNodeById(id()) -->
  <div class="row-fluid" data-bind="with: $root.workflow.getNodeById(id())" style="padding: 10px">
    <div data-bind="visible: $root.isEditing">
      <div data-bind="visible: ! $parent.ooziePropertiesExpanded()" class="nowrap">

        <h6>
          <a class="pointer" data-bind="click: function(){ properties.distcp_parameters.push(ko.mapping.fromJS({'value': ''}));}">
            <span data-bind="text: $root.workflow_properties.distcp_parameters.label"></span> <i class="fa fa-plus"></i>
          </a>
        </h6>
        <ul data-bind="foreach: properties.distcp_parameters" class="unstyled">
          <li>
            <input type="text" class="input-xlarge filechooser-input" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.distcp_parameters.help_text }"/>
            <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: false} }, visible: value().length > 0'></span>
            <a href="#" data-bind="click: function(){ $parent.properties.distcp_parameters.remove(this);  }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
        </ul>

      </div>
    </div>

    <div data-bind="visible: ! $root.isEditing()">
      <span data-bind="template: { name: 'logs-icon' }"></span>
      Parameters
      <ul data-bind="foreach: properties.distcp_parameters" class="unstyled">
        <li>
          <span data-bind='template: { name: "common-fs-link", data: {path: value(), with_label: true} }, visible: value().length > 0'></span>
        </li>
      </ul>
    </div>

    <div data-bind="visible: $parent.ooziePropertiesExpanded">
      <ul class="nav nav-tabs">
        <li class="active"><a data-bind="attr: { href: '#properties-' + id()}" data-toggle="tab">Properties</a></li>
        <li><a data-bind="attr: { href: '#sla-' + id()}" href="#sla" data-toggle="tab">SLA</a></li>
        <li><a data-bind="attr: { href: '#credentials-' + id()}" data-toggle="tab">Credentials</a></li>
        <li><a data-bind="attr: { href: '#transitions-' + id()}" data-toggle="tab">Transitions</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" data-bind="attr: { id: 'properties-' + id() }">

     <h6>Prepare</h6>
       <ul data-bind="visible: properties.prepares().length > 0, foreach: properties.prepares" class="unstyled">
         <li>
           <div style="display: inline-block; width: 60px" data-bind="text: type"></div>
           <input type="text" class="filechooser-input input-xlarge"
                data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.prepares.help_text }"/>
            <a href="#" data-bind="click: function(){ $parent.properties.prepares.remove(this); $(document).trigger('drawArrows') }">
              <i class="fa fa-minus"></i>
            </a>
          </li>
       </ul>
       <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'mkdir', 'value': ''}); $(document).trigger('drawArrows') }">
         Directory <i class="fa fa-plus"></i>
       </a>
       <a class="pointer" data-bind="click: function(){ properties.prepares.push({'type': 'delete', 'value': ''}); $(document).trigger('drawArrows') }">
         Delete <i class="fa fa-plus"></i>
       </a>

       <h6>
         <a class="pointer" data-bind="click: function(){ properties.job_properties.push({'name': '', 'value': ''}); $(document).trigger('drawArrows') }">
           Properties <i class="fa fa-plus"></i>
         </a>
       </h6>
           <ul data-bind="visible: properties.job_properties().length > 0, foreach: properties.job_properties" class="unstyled">
           <li>
             <input type="text" data-bind="value: name" placeholder="name, e.g. mapred.job.queue.name"/>
             <input type="text" class="filechooser-input input-xlarge" data-bind="filechooser: value, filechooserOptions: globalFilechooserOptions, hdfsAutocomplete: value, value: value, attr: { placeholder: $root.workflow_properties.job_properties.help_text }"/>
             <a href="#" data-bind="click: function(){ $parent.properties.job_properties.remove(this); $(document).trigger('drawArrows') }">
               <i class="fa fa-minus"></i>
              </a>
             </li>
           </ul>
           <em data-bind="visible: properties.job_properties().length == 0">No properties defined.</em>

           <h6>
             <span data-bind="text: $root.workflow_properties.java_opts.label"></span>
           </h6>
           <input type="text" class="input-xlarge" data-bind="value: properties.java_opts, attr: { placeholder: $root.workflow_properties.java_opts.help_text }" />
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'sla-' + id() }">
          <span data-bind="template: { name: 'common-action-sla' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'credentials-' + id() }">
          <span data-bind="template: { name: 'common-action-credentials' }"></span>
        </div>

        <div class="tab-pane" data-bind="attr: { id: 'transitions-' + id() }">
          <span data-bind="template: { name: 'common-action-transition' }"></span>
        </div>
      </div>
    </div>
  </div>
  <!-- /ko -->
</script>




<div id="addActionDemiModal" class="demi-modal demi-modal-half hide" data-backdrop="false">
  <div class="modal-body">
    <table data-bind="foreach: addActionProperties"></table>

    <br>
    <a class="btn btn-primary disable-feedback" data-bind="css: {'disabled': ! addActionPropertiesFilledOut()}, click: function(field){ addActionPropertiesFilledOut() ? addActionDemiModalFieldPreview(field) : void(0) } ">
      Add
    </a>
  </div>
</div>

<div id="settingsModal" class="modal fade hide">
  <div class="modal-header" style="padding-bottom: 2px">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3>Workflow Settings</h3>
  </div>
  <div class="modal-body">
      <h4>Variables</h4>
      <ul data-bind="foreach: $root.workflow.properties.parameters" class="unstyled">
        <!-- ko if: name() != 'oozie.use.system.libpath' --><!-- /ko -->
      </ul>
      <a class="pointer" data-bind="click: function(){ $root.workflow.properties.parameters.push(ko.mapping.fromJS({'name': '', 'value': ''})); }">
        <i class="fa fa-plus"></i> Add parameter
      </a>

      <h4>Workspace</h4>
      <input value="hue-oozie-1460739072.7" data-original-title="/user/hue/oozie/workspaces/hue-oozie-1460739072.7" autocomplete="off" class="input-xlarge filechooser-input" data-bind="filechooser: {value: $root.workflow.properties.deployment_dir, displayJustLastBit: true}, filechooserOptions: globalFilechooserOptions" rel="tooltip" type="text"><button class="btn fileChooserBtn">..</button>
      <span data-bind="template: { name: &quot;common-fs-link&quot;, data: {path: $root.workflow.properties.deployment_dir(), with_label: false}}">
<!-- ko if: $data.path.length > 0 -->
  <!-- ko if: with_label --><!-- /ko -->

   <!-- ko if: ! with_label -->
     <a href="http://quickstart.cloudera:8888/filebrowser/view/user/hue/oozie/workspaces/hue-oozie-1460739072.7" data-bind="attr: {href: '/filebrowser/view' + ($data.path.indexOf('/') == -1 ? $root.workflow.properties.deployment_dir() + '/' : '') + $data.path }" target="_blank" title="Open">
       <i class="fa fa-external-link-square"></i>
     </a>
   <!-- /ko -->
 <!-- /ko -->
</span>

	  <h4>Hadoop Properties</h4>
      <ul data-bind="foreach: $root.workflow.properties.properties" class="unstyled"></ul>
      <a class="pointer" data-bind="click: function(){ $root.workflow.properties.properties.push({'name': '', 'value': ''}); }">
        <i class="fa fa-plus"></i> Add property
      </a>

      <h4>Show graph arrows</h4>
      <input checked="checked" data-original-title="Toggle arrow showing" data-bind="checked: $root.workflow.properties.show_arrows" rel="tooltip" data-placement="bottom" type="checkbox">

      <h4>Version</h4>
      <select class="input-xlarge" data-bind="value: $root.workflow.properties.schema_version, options: $root.workflow.versions"><option value="uri:oozie:workflow:0.4">uri:oozie:workflow:0.4</option><option value="uri:oozie:workflow:0.4.5">uri:oozie:workflow:0.4.5</option><option selected="selected" value="uri:oozie:workflow:0.5">uri:oozie:workflow:0.5</option></select>

      <h4>Job XML</h4>
      <input data-original-title="" autocomplete="off" class="input-xlarge filechooser-input" data-bind="filechooser: $root.workflow.properties.job_xml, filechooserOptions: globalFilechooserOptions" type="text"><button class="btn fileChooserBtn">..</button>
      <span data-bind="template: { name: &quot;common-fs-link&quot;, data: {path: $root.workflow.properties.job_xml(), with_label: false}}">
<!-- ko if: $data.path.length > 0 --><!-- /ko -->
</span>

      <h4>SLA Configuration</h4>
      <div class="sla-form" data-bind="with: $root.workflow.properties">
        
  <div data-bind="foreach: { 'data': sla, 'afterRender': addSLATextAndPlaceholder }">
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' -->
      <label class="checkbox" style="text-align: left"><span class="control-label">Enable</span> <input placeholder="" data-bind="checked: value" type="checkbox"></label>
      <!-- /ko -->
      <!-- ko if:  key() != 'enabled' --><!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Nominal time *</label>
      <div class="controls">
        <input value="${nominal_time}" placeholder="${nominal_time}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Should start</label>
      <div class="controls">
        <input placeholder="${10 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Should end *</label>
      <div class="controls">
        <input value="${30 * MINUTES}" placeholder="${30 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Max duration</label>
      <div class="controls">
        <input placeholder="${30 * MINUTES}" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Alert events</label>
      <div class="controls">
        <input placeholder="start_miss,end_miss,duration_miss" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Alert contact</label>
      <div class="controls">
        <input placeholder="joe@example.com,bob@example.com" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Notification message</label>
      <div class="controls">
        <input placeholder="My Job has encountered an SLA event!" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  
    <div class="control-group control-row" style="margin-bottom: 2px">
      <!-- ko if:  key() == 'enabled' --><!-- /ko -->
      <!-- ko if:  key() != 'enabled' -->
      <span style="display: none;" data-bind="visible: ko.utils.arrayFilter($parent.sla(), function(item) { return item.key() == 'enabled' &amp;&amp; item.value()==true }).length == 1">
      <label class="control-label" style="text-align: left">Upstream apps</label>
      <div class="controls">
        <input placeholder="dependent-app-1, dependent-app-2" data-bind="value: value" class="span7" type="text">
      </div>
      </span>
      <!-- /ko -->
    </div>
  </div>

      </div>
  </div>
</div>


<div class="submit-modal modal hide"></div>

<div id="chooseFile" class="modal hide fade">
  <div class="modal-header">
      <a href="#" class="close" data-dismiss="modal">Ã—</a>
      <h3>Choose a file</h3>
  </div>
  <div class="modal-body">
      <div id="filechooser">
      </div>
  </div>
  <div class="modal-footer">
  </div>
</div>


</div>

<link rel="stylesheet" href="Oozie%20scheduling_files/hue-filetypes.css">
<link rel="stylesheet" href="Oozie%20scheduling_files/hue-charts.css">
<link rel="stylesheet" href="Oozie%20scheduling_files/chosen.css">
<link rel="stylesheet" href="Oozie%20scheduling_files/common-editor.css">
<link rel="stylesheet" href="Oozie%20scheduling_files/workflow-editor.css">



  <link rel="stylesheet" href="Oozie%20scheduling_files/common_dashboard.css">
  <script src="Oozie%20scheduling_files/ko_002.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/jquery-ui-1.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/knockout-min.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/knockout.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/knockout-sortable.js" type="text/javascript" charset="utf-8"></script>




<div id="documentShareModal" class="modal hide fade">
  <!-- ko if: selectedDoc() -->
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3>Sharing settings</h3>
  </div>
  <div class="modal-body">
    <div class="row-fluid">
      <div class="span6">
        <h4 class="muted" style="margin-top:0px">Read</h4>
        <div data-bind="visible: (selectedDoc().perms.read.users.length == 0 &amp;&amp; selectedDoc().perms.read.groups.length == 0)">The document is not shared for read.</div>
        <ul class="unstyled airy" data-bind="foreach: selectedDoc().perms.read.users"></ul>
        <ul class="unstyled airy" data-bind="foreach: selectedDoc().perms.read.groups"></ul>
      </div>

      <div class="span6">
        <h4 class="muted" style="margin-top:0px">Read and Modify</h4>
        <div data-bind="visible: (selectedDoc().perms.write.users.length == 0 &amp;&amp; selectedDoc().perms.write.groups.length == 0)">The document is not shared for read and modify.</div>
        <ul class="unstyled airy" data-bind="foreach: selectedDoc().perms.write.users"></ul>
        <ul class="unstyled airy" data-bind="foreach: selectedDoc().perms.write.groups"></ul>
      </div>

    </div>
    <div class="clearfix"></div>
    <div style="margin-top: 20px">
      <div class="input-append">
        <input id="documentShareTypeahead" style="width: 460px" placeholder="Type a username or a group name" disabled="disabled" type="text">
        <div class="btn-group">
          <a id="documentShareAddBtn" class="btn disabled"><i class="fa fa-plus-circle"></i> <span data-bind="text: selectedPermLabel">Read</span></a>
          <a id="documentShareCaret" class="btn dropdown-toggle disabled" data-toggle="dropdown">
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            <li><a data-bind="click: changeDocumentSharePerm.bind(null, 'read')" href="javascript:void(0)">Read</a></li>
            <li><a data-bind="click: changeDocumentSharePerm.bind(null, 'write')" href="javascript:void(0)">Read and Modify</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <a href="#" data-dismiss="modal" class="btn btn-primary disable-feedback disable-enter">Done</a>
  </div>
  <!-- /ko -->
</div>


<script src="Oozie%20scheduling_files/bootstrap-editable.js" type="text/javascript" charset="utf-8"></script>
<script src="Oozie%20scheduling_files/hue.js"></script>
<script src="Oozie%20scheduling_files/ko.js" type="text/javascript" charset="utf-8"></script>
<script src="Oozie%20scheduling_files/chosen.js" type="text/javascript" charset="utf-8"></script>
<script src="Oozie%20scheduling_files/share.js"></script>
<script src="Oozie%20scheduling_files/jquery_018.js" type="text/javascript" charset="utf-8"></script>


  <link rel="stylesheet" href="Oozie%20scheduling_files/freshereditor.css">
  <link rel="stylesheet" href="Oozie%20scheduling_files/codemirror.css">
  <link rel="stylesheet" href="Oozie%20scheduling_files/bootstrap-editable.css">
  <link rel="stylesheet" href="Oozie%20scheduling_files/bootstrap-datepicker.css">
  <link rel="stylesheet" href="Oozie%20scheduling_files/bootstrap-timepicker.css">
  <link rel="stylesheet" href="Oozie%20scheduling_files/bootstrap-spinedit.css">
  <link rel="stylesheet" href="Oozie%20scheduling_files/bootstrap-slider.css">

  <script src="Oozie%20scheduling_files/bootstrap-datepicker.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/bootstrap-timepicker.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/bootstrap-spinedit.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/bootstrap-slider.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/freshereditor.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/codemirror-3.js" type="text/javascript" charset="utf-8"></script>
  <script src="Oozie%20scheduling_files/codemirror-xml.js" type="text/javascript" charset="utf-8"></script>

  <script src="Oozie%20scheduling_files/less-1.js" type="text/javascript" charset="utf-8"></script>


  <script type="text/javascript">
    KO_DATERANGEPICKER_LABELS = {
      START: "Start",
      END: "End",
      INTERVAL: "Interval",
      CUSTOM_FORMAT: "Custom Format",
      DATE_PICKERS: "Date Pickers",
      CUSTOM_POPOVER_TITLE: "e.g.",
      CUSTOM_POPOVER_CONTENT: "Start: NOW-5DAYS<br/>End: NOW<br/>Interval: +1HOURS<br/><a href='http://lucene.apache.org/solr/4_10_2/solr-core/org/apache/solr/util/DateMathParser.html' target='_blank'>Read more...</a>"
    };
  </script>
  <script src="Oozie%20scheduling_files/ko_003.js" type="text/javascript" charset="utf-8"></script>



<script src="Oozie%20scheduling_files/workflow-editor.js" type="text/javascript" charset="utf-8"></script>
<script src="Oozie%20scheduling_files/workflow-editor_002.js" type="text/javascript" charset="utf-8"></script>
<script src="Oozie%20scheduling_files/jquery_017.js" type="text/javascript" charset="utf-8"></script>
<script src="Oozie%20scheduling_files/editor2-utils.js" type="text/javascript" charset="utf-8"></script>

<div id="exposeOverlay"></div>

<script type="text/javascript">
  
  function addSLATextAndPlaceholder(elements, $data) {
    var SLA_TEXT = {
      'enabled': {'niceName': 'Enable', 'placeHolder': ''},
      'nominal-time': {'niceName': 'Nominal time *', 'placeHolder': '${nominal_time}'},
      'should-start': {'niceName': 'Should start', 'placeHolder': '${10 * MINUTES}'},
      'should-end': {'niceName': 'Should end *', 'placeHolder': '${30 * MINUTES}'},
      'max-duration': {'niceName': 'Max duration', 'placeHolder': '${30 * MINUTES}'},
      'alert-events': {'niceName': 'Alert events', 'placeHolder': 'start_miss,end_miss,duration_miss'},
      'alert-contact': {'niceName': 'Alert contact', 'placeHolder': 'joe@example.com,bob@example.com'},
      'notification-msg': {'niceName': 'Notification message', 'placeHolder': 'My Job has encountered an SLA event!'},
      'upstream-apps': {'niceName': 'Upstream apps', 'placeHolder': 'dependent-app-1, dependent-app-2'}
    };
    var text = SLA_TEXT[$data.key()];
    if (text) {
      $(elements).find('input').attr('placeholder', text.placeHolder);
      $(elements).find('.control-label').text(text.niceName);
    } else {
      $(elements).find('input').attr('placeholder', '');
      $(elements).find('.control-label').text('');
    }
  }


  var viewModel = new WorkflowEditorViewModel([{"oozieRows": [{"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "HiveServer2 Script", "widgetType": "hive2-widget", "oozieMovable": true, "ooziePropertiesExpanded": false, "size": 12, "id": "7d0cb7ad-14ab-6076-3043-7b386ac9ef54", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "f554916d-fad8-467c-3674-162cba359b5a", "columns": []}, {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "HiveServer2 Script", "widgetType": "hive2-widget", "oozieMovable": true, "ooziePropertiesExpanded": false, "size": 12, "id": "a0dc9a2c-cf5f-f5cb-9cff-11307b938734", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "7ccfa58c-c06d-a14a-7d09-e7bc9a34eb3b", "columns": []}, {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "HiveServer2 Script", "widgetType": "hive2-widget", "oozieMovable": true, "ooziePropertiesExpanded": false, "size": 12, "id": "4c806cec-cda4-dc39-e706-cc751b97c598", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "dc370a3c-e0da-a626-0c11-975936ff0373", "columns": []}], "rows": [{"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "Start", "widgetType": "start-widget", "oozieMovable": false, "ooziePropertiesExpanded": false, "size": 12, "id": "3f107997-04cc-8733-60a9-a4bb62cebffc", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "8842a43a-35d2-591a-8b71-3fa36d232820", "columns": []}, {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "HiveServer2 Script", "widgetType": "hive2-widget", "oozieMovable": true, "ooziePropertiesExpanded": false, "size": 12, "id": "7d0cb7ad-14ab-6076-3043-7b386ac9ef54", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "f554916d-fad8-467c-3674-162cba359b5a", "columns": []}, {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "HiveServer2 Script", "widgetType": "hive2-widget", "oozieMovable": true, "ooziePropertiesExpanded": false, "size": 12, "id": "a0dc9a2c-cf5f-f5cb-9cff-11307b938734", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "7ccfa58c-c06d-a14a-7d09-e7bc9a34eb3b", "columns": []}, {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "HiveServer2 Script", "widgetType": "hive2-widget", "oozieMovable": true, "ooziePropertiesExpanded": false, "size": 12, "id": "4c806cec-cda4-dc39-e706-cc751b97c598", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "dc370a3c-e0da-a626-0c11-975936ff0373", "columns": []}, {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "End", "widgetType": "end-widget", "oozieMovable": false, "ooziePropertiesExpanded": false, "size": 12, "id": "33430f0f-ebfa-c3ec-f237-3e77efa03d0a", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "b01f6bcb-3c99-2131-caea-403defcb335c", "columns": []}, {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "Kill", "widgetType": "kill-widget", "oozieMovable": true, "ooziePropertiesExpanded": false, "size": 12, "id": "17c9c895-5a16-7443-bb81-f34b30b21548", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "704df1a9-32d7-1dbc-de1e-7e10cca884e4", "columns": []}], "oozieEndRow": {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "End", "widgetType": "end-widget", "oozieMovable": false, "ooziePropertiesExpanded": false, "size": 12, "id": "33430f0f-ebfa-c3ec-f237-3e77efa03d0a", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "b01f6bcb-3c99-2131-caea-403defcb335c", "columns": []}, "size": 12, "oozieKillRow": {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "Kill", "widgetType": "kill-widget", "oozieMovable": true, "ooziePropertiesExpanded": false, "size": 12, "id": "17c9c895-5a16-7443-bb81-f34b30b21548", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "704df1a9-32d7-1dbc-de1e-7e10cca884e4", "columns": []}, "oozieStartRow": {"enableOozieDropOnBefore": true, "enableOozieDropOnSide": true, "enableOozieDrop": false, "widgets": [{"status": "", "name": "Start", "widgetType": "start-widget", "oozieMovable": false, "ooziePropertiesExpanded": false, "size": 12, "id": "3f107997-04cc-8733-60a9-a4bb62cebffc", "isLoading": true, "offset": 0, "actionURL": "", "progress": 0, "logsURL": "", "oozieExpanded": false, "properties": {}, "klass": "card card-widget span12"}], "id": "8842a43a-35d2-591a-8b71-3fa36d232820", "columns": []}, "klass": "card card-home card-column span12", "enableOozieDropOnBefore": true, "drops": ["temp"], "id": "5aec26fe-61d3-67d7-7f75-502a6ef05694", "enableOozieDropOnAfter": true}], {"name": "My Workflow", "versions": ["uri:oozie:workflow:0.4", "uri:oozie:workflow:0.4.5", "uri:oozie:workflow:0.5"], "isDirty": true, "movedNode": null, "linkMapping": {"17c9c895-5a16-7443-bb81-f34b30b21548": [], "7d0cb7ad-14ab-6076-3043-7b386ac9ef54": ["a0dc9a2c-cf5f-f5cb-9cff-11307b938734"], "33430f0f-ebfa-c3ec-f237-3e77efa03d0a": [], "3f107997-04cc-8733-60a9-a4bb62cebffc": ["7d0cb7ad-14ab-6076-3043-7b386ac9ef54"], "a0dc9a2c-cf5f-f5cb-9cff-11307b938734": ["4c806cec-cda4-dc39-e706-cc751b97c598"], "4c806cec-cda4-dc39-e706-cc751b97c598": ["33430f0f-ebfa-c3ec-f237-3e77efa03d0a"]}, "dependencies": [], "nodeIds": ["3f107997-04cc-8733-60a9-a4bb62cebffc", "33430f0f-ebfa-c3ec-f237-3e77efa03d0a", "17c9c895-5a16-7443-bb81-f34b30b21548", "7d0cb7ad-14ab-6076-3043-7b386ac9ef54", "a0dc9a2c-cf5f-f5cb-9cff-11307b938734", "4c806cec-cda4-dc39-e706-cc751b97c598"], "id": 1, "nodes": [{"properties": {}, "name": "Start", "children": [{"to": "7d0cb7ad-14ab-6076-3043-7b386ac9ef54"}], "actionParametersFetched": false, "type": "start-widget", "id": "3f107997-04cc-8733-60a9-a4bb62cebffc", "actionParameters": []}, {"properties": {}, "name": "End", "children": [], "actionParametersFetched": false, "type": "end-widget", "id": "33430f0f-ebfa-c3ec-f237-3e77efa03d0a", "actionParameters": []}, {"properties": {"message": "Action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]"}, "name": "Kill", "children": [], "actionParametersFetched": false, "type": "kill-widget", "id": "17c9c895-5a16-7443-bb81-f34b30b21548", "actionParameters": []}, {"name": "hive2-7d0c", "actionParametersUI": [], "children": [{"to": "a0dc9a2c-cf5f-f5cb-9cff-11307b938734"}, {"error": "17c9c895-5a16-7443-bb81-f34b30b21548"}], "actionParametersFetched": false, "id": "7d0cb7ad-14ab-6076-3043-7b386ac9ef54", "type": "hive2-widget", "properties": {"files": [], "job_xml": "", "parameters": [], "job_properties": [], "jdbc_url": "", "archives": [], "prepares": [], "credentials": [], "script_path": "/user/cloudera/tables_creation.hql", "password": "", "sla": [{"key": "enabled", "value": false}, {"key": "nominal-time", "value": "${nominal_time}"}, {"key": "should-start", "value": ""}, {"key": "should-end", "value": "${30 * MINUTES}"}, {"key": "max-duration", "value": ""}, {"key": "alert-events", "value": ""}, {"key": "alert-contact", "value": ""}, {"key": "notification-msg", "value": ""}, {"key": "upstream-apps", "value": ""}]}, "actionParameters": []}, {"name": "hive2-a0dc", "actionParametersUI": [], "children": [{"to": "4c806cec-cda4-dc39-e706-cc751b97c598"}, {"error": "17c9c895-5a16-7443-bb81-f34b30b21548"}], "actionParametersFetched": false, "id": "a0dc9a2c-cf5f-f5cb-9cff-11307b938734", "type": "hive2-widget", "properties": {"files": [], "job_xml": "", "parameters": [], "job_properties": [], "jdbc_url": "", "archives": [], "prepares": [], "credentials": [], "script_path": "/user/cloudera/load_data.hql", "password": "", "sla": [{"key": "enabled", "value": false}, {"key": "nominal-time", "value": "${nominal_time}"}, {"key": "should-start", "value": ""}, {"key": "should-end", "value": "${30 * MINUTES}"}, {"key": "max-duration", "value": ""}, {"key": "alert-events", "value": ""}, {"key": "alert-contact", "value": ""}, {"key": "notification-msg", "value": ""}, {"key": "upstream-apps", "value": ""}]}, "actionParameters": []}, {"name": "hive2-4c80", "actionParametersUI": [], "children": [{"to": "33430f0f-ebfa-c3ec-f237-3e77efa03d0a"}, {"error": "17c9c895-5a16-7443-bb81-f34b30b21548"}], "actionParametersFetched": true, "id": "4c806cec-cda4-dc39-e706-cc751b97c598", "type": "hive2-widget", "properties": {"files": [], "job_xml": "", "parameters": [], "job_properties": [], "jdbc_url": "", "archives": [], "prepares": [], "credentials": [], "script_path": "/user/cloudera/aggregation.hql", "password": "", "sla": [{"key": "enabled", "value": false}, {"key": "nominal-time", "value": "${nominal_time}"}, {"key": "should-start", "value": ""}, {"key": "should-end", "value": "${30 * MINUTES}"}, {"key": "max-duration", "value": ""}, {"key": "alert-events", "value": ""}, {"key": "alert-contact", "value": ""}, {"key": "notification-msg", "value": ""}, {"key": "upstream-apps", "value": ""}]}, "actionParameters": []}], "properties": {"job_xml": "", "description": "", "wf1_id": null, "sla_enabled": false, "deployment_dir": "/user/hue/oozie/workspaces/hue-oozie-1460739072.7", "schema_version": "uri:oozie:workflow:0.5", "sla": [{"key": "enabled", "value": false}, {"key": "nominal-time", "value": "${nominal_time}"}, {"key": "should-start", "value": ""}, {"key": "should-end", "value": "${30 * MINUTES}"}, {"key": "max-duration", "value": ""}, {"key": "alert-events", "value": ""}, {"key": "alert-contact", "value": ""}, {"key": "notification-msg", "value": ""}, {"key": "upstream-apps", "value": ""}], "show_arrows": true, "parameters": [{"name": "oozie.use.system.libpath", "value": true}], "properties": []}, "nodeNamesMapping": {"17c9c895-5a16-7443-bb81-f34b30b21548": "Kill", "7d0cb7ad-14ab-6076-3043-7b386ac9ef54": "hive2-7d0c", "33430f0f-ebfa-c3ec-f237-3e77efa03d0a": "End", "3f107997-04cc-8733-60a9-a4bb62cebffc": "Start", "a0dc9a2c-cf5f-f5cb-9cff-11307b938734": "hive2-a0dc", "4c806cec-cda4-dc39-e706-cc751b97c598": "hive2-4c80"}, "uuid": "5a2e650e-e847-391c-8125-f3f6d63b9a89"}, [], {"body": {"help_text": "Plain-text", "type": "textarea", "name": "body", "value": "", "label": "Body"}, "app_name": {"help_text": "The name of the spark application", "type": "", "name": "app_name", "value": "MySpark", "label": "App name"}, "spark_opts": {"help_text": "Ex: --executor-memory 20G --num-executors 50", "type": "", "name": "spark_opts", "value": "", "label": "Options list"}, "ssh_command": {"help_text": "The path of the Shell command to execute.", "type": "textarea", "name": "ssh_command", "value": "ls", "label": "Ssh command"}, "java_opts": {"help_text": "Parameters for the JVM, e.g. -Dprop1=a -Dprop2=b", "type": "", "name": "java_opts", "value": [], "label": "Java options"}, "chgrps": {"help_text": "File or directory.", "type": "", "name": "chgrps", "value": [], "label": "Change the group"}, "hive_xml": {"help_text": "Refer to a hive-site.xml for connecting to Hive", "type": "", "name": "hive_xml", "value": "", "label": "Hive XML"}, "chmods": {"help_text": "File or directory.", "type": "", "name": "chmods", "value": [], "label": "Change permissions"}, "message": {"help_text": "Message to display when the workflow fails. Can contain some EL functions.", "type": "textarea", "name": "message", "value": "Action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]", "label": "Message"}, "moves": {"help_text": "Destination.", "type": "", "name": "moves", "value": [], "label": "Move file or directory"}, "spark_arguments": {"help_text": "Arguments, one by one, e.g. 1000, /path/a.", "name": "spark_arguments", "value": [], "label": "Arguments"}, "subject": {"help_text": "Plain-text", "type": "text", "name": "subject", "value": "", "label": "Subject"}, "job_xml": {"help_text": "Refer to a Hadoop JobConf job.xml", "type": "", "name": "job_xml", "value": "", "label": "Job XML"}, "parameters": {"help_text": "The Hive2 parameters of the script. E.g. N=5, INPUT=${inputDir}", "type": "", "name": "parameters", "value": [], "label": "Parameters"}, "jar_path": {"help_text": "Path to the jar on HDFS.", "type": "", "name": "jar_path", "value": "", "label": "Jar name"}, "distcp_parameters": {"help_text": "Options first, then source / destination paths", "type": "distcp", "name": "distcp_parameters", "value": [{"value": ""}, {"value": ""}], "label": "Arguments"}, "class": {"help_text": "e.g. org.apache.spark.examples.mllib.JavaALS.", "type": "text", "name": "class", "value": "", "label": "Main class"}, "cc": {"help_text": "Comma-separated values", "type": "text", "name": "cc", "value": "", "label": "Cc addresses (optional)"}, "arguments": {"help_text": "One arg, e.g. -l, --help", "type": "", "name": "arguments", "value": [], "label": "Arguments"}, "main_class": {"help_text": "Java class. e.g. org.apache.hadoop.examples.Grep", "type": "text", "name": "main_class", "value": "", "label": "Main class"}, "jars": {"help_text": "Comma separated list of jars or python HDFS files.", "type": "", "name": "jars", "value": "", "label": "Jars/py files"}, "env_var": {"help_text": "e.g. MAX=10 or PATH=$PATH:mypath", "type": "", "name": "env_var", "value": [], "label": "Environment variables"}, "archives": {"help_text": "zip, tar and tgz/tar.gz uncompressed into the running directory.", "type": "", "name": "archives", "value": [], "label": "Archives"}, "files": {"help_text": "Files put in the running directory.", "type": "", "name": "files", "value": [], "label": "Files"}, "to": {"help_text": "Comma-separated values", "type": "text", "name": "to", "value": "", "label": "To addresses"}, "workflow": {"help_text": "The sub-workflow application to include. You must own all the sub-workflows", "type": "workflow", "name": "workflow", "value": null, "label": "Sub-workflow"}, "mkdirs": {"help_text": "Sub directories are created if needed.", "type": "", "name": "mkdirs", "value": [], "label": "Create directory"}, "shell_command": {"help_text": "Shell command to execute, e.g script.sh", "type": "", "name": "shell_command", "value": "", "label": "Shell command"}, "host": {"help_text": "Where the shell will be executed.", "type": "text", "name": "host", "value": "user@host.com", "label": "User and Host"}, "prepares": {"help_text": "Path to manipulate before starting the application.", "name": "prepares", "value": [], "label": "Prepares"}, "propagate_configuration": {"help_text": "If the workflow job configuration should be propagated to the child workflow.", "type": "", "name": "propagate_configuration", "value": true, "label": "Propagate configuration"}, "password": {"help_text": "The password element must contain the password of the current user. However, the password is only used if Hive Server 2 is backed by something requiring a password (e.g. LDAP); non-secured Hive Server 2 or Kerberized Hive Server 2 don't require a password.", "type": "", "name": "password", "value": "", "label": "Password"}, "jdbc_url": {"help_text": "e.g. jdbc:hive2://localhost:10000/default. JDBC URL for the Hive Server 2.", "type": "", "name": "jdbc_url", "value": "", "label": "HiveServer2 URL"}, "deletes": {"help_text": "Deletes recursively all content.", "type": "", "name": "deletes", "value": [], "label": "Delete path"}, "mapper": {"help_text": "The executable/script to be used as mapper.", "type": "", "name": "mapper", "value": "", "label": "Mapper"}, "reducer": {"help_text": "The executable/script to be used as reducer.", "type": "", "name": "reducer", "value": "", "label": "Reducer"}, "job_properties": {"help_text": "value, e.g. production", "name": "job_properties", "value": [], "label": "Hadoop job properties"}, "capture_output": {"help_text": "Capture output of the stdout of the ssh command execution. The ssh command output must be in Java Properties file format and it must not exceed 2KB. From within the workflow definition, the output of an ssh action node is accessible via the String action:output(String node, String key) function", "type": "", "name": "capture_output", "value": true, "label": "Capture output"}, "touchzs": {"help_text": "Or update its modification date.", "type": "", "name": "touchzs", "value": [], "label": "Create or touch a file"}, "command": {"help_text": "The full sqoop command. Either put it here or split it by spaces and insert the parts as multiple parameters below.", "type": "textarea", "name": "command", "value": "import  --connect jdbc:hsqldb:file:db.hsqldb --table TT --target-dir hdfs://localhost:8020/user/foo -m 1", "label": "Sqoop command"}, "mode": {"help_text": "e.g. client,cluster", "type": "", "name": "mode", "value": "client", "label": "Mode"}, "script_path": {"help_text": "Path to the script on HDFS.", "type": "", "name": "script_path", "value": "", "label": "Script"}, "spark_master": {"help_text": "Ex: spark://host:port, mesos://host:port, yarn, or local.", "type": "", "name": "spark_master", "value": "local[*]", "label": "Spark Master"}}, [{"owner": "cloudera", "name": "My Workflow", "value": "5a2e650e-e847-391c-8125-f3f6d63b9a89", "id": 1}], true);
  ko.applyBindings(viewModel, $("#editor")[0]);

  var shareViewModel = initSharing("#documentShareModal");
  shareViewModel.setDocId(47);

  viewModel.init();
  viewModel.workflow.tracker().markCurrentStateAsClean();
  fullLayout(viewModel);

  var globalFilechooserOptions = {
    skipInitialPathIfEmpty: true,
    showExtraHome: true,
    uploadFile: true,
    createFolder: true,
    extraHomeProperties: {
      label: 'Workspace',
      icon: 'fa-folder-open',
      path: viewModel.workflow.properties.deployment_dir()
    },
    deploymentDir: viewModel.workflow.properties.deployment_dir()
  }

  function columnDropAdditionalHandler(widget) {
    widgetDraggedAdditionalHandler(widget);
  }

  function widgetDraggedAdditionalHandler(widget) {
    $("canvas").remove();
    if (viewModel.currentlyDraggedWidget() && viewModel.currentlyDraggedWidget().id() == ""){
      viewModel.workflow.newNode(widget);
      showAddActionDemiModal(widget);
    }
    else {
      if (viewModel.currentlyDraggedOp() == "move"){
        viewModel.workflow.moveNode(widget);
      }
      else { // Copy
        var _sourceNode = viewModel.workflow.getNodeById(viewModel.currentlyDraggedWidget().id());
        viewModel.workflow.newNode(widget, viewModel.workflow.addNode, _sourceNode);
      }
      $(document).trigger("drawArrows");
    }
  }

  function showAddActionDemiModal(widget) {
    viewModel.newAction(widget);
    $("#exposeOverlay").fadeIn(300);
    var _el = $("#wdg_" + widget.id());
    _el.css("zIndex", "1032");
    var lastSeenPosition = _el.position();
    var _width = _el.width();

    _el.css("position", "absolute");
    _el.css({
      "top": (lastSeenPosition.top) + "px",
      "left": lastSeenPosition.left + "px",
      "width": 450
    });
    $("#addActionDemiModal").width(_el.width()).css("top", _el.offset().top + 25).css("left", _el.offset().left).modal("show");
    $("html, body").animate({
      scrollTop: $("#addActionDemiModal").offset().top - 200
    }, 200);
  }

  function addActionDemiModalFieldPreview(field) {
    if (viewModel.newAction() != null) {
      var _el = $("#wdg_" + viewModel.newAction().id());
      _el.css("position", "static");
      _el.css("width", "");
      viewModel.workflow.addNode(viewModel.newAction());
      $("#addActionDemiModal").modal("hide");
      $("#wdg_" + viewModel.newAction().id()).css("zIndex", "0");
      $("#exposeOverlay").fadeOut(300);
      viewModel.newAction(null);
    }
  }

  function addActionDemiModalFieldCancel() {
    $("#exposeOverlay").fadeOut(300);
    $("#addActionDemiModal").modal("hide");
    if (viewModel.newAction()){
      viewModel.removeWidgetById(viewModel.newAction().id());
    }
    viewModel.newAction(null);
  }

  $(document).on("editingToggled", function(){
    $("canvas").remove();
    exposeOverlayClickHandler();
    window.setTimeout(renderChangeables, 100);
  });

  function resizeDrops() {
    $(".drop-target-side").each(function () {
      var _el = $(this);
      _el.height(0);
      window.setTimeout(function(){
        _el.height(_el.parent().parent().innerHeight() - 12);
      }, 20);
    });
  }

  function renderChangeables() {
    resizeDrops();
    if (viewModel.workflow.properties.show_arrows()){
      drawArrows();
    }
  }

  var lastSeenPosition = null;
  var lastExpandedWidget = null;
  function setLastExpandedWidget(widget) {
    lastExpandedWidget = widget;
    if (! widget.oozieExpanded()){
      var _el = $("#wdg_" + widget.id());
      if (_el.width() < 400){
        _el.css("z-index", "1032");
        lastSeenPosition = _el.position();
        var _width = _el.width();

        _el.css("position", "absolute");
        _el.css({
          "top": (lastSeenPosition.top) + "px",
          "left": lastSeenPosition.left + "px",
          "width": _width
        });
        _el.width(500);
        $("#exposeOverlay").fadeIn(300);
        widget.oozieExpanded(true);
      }
      else {
        widget.oozieExpanded(false);
      }
    }
  }

  function exposeOverlayClickHandler() {
    if (lastExpandedWidget) {
      var _el = $("#wdg_" + lastExpandedWidget.id());
      _el.find(".prop-editor").hide();
      _el.removeAttr("style");
      lastExpandedWidget.ooziePropertiesExpanded(false);
      lastExpandedWidget.oozieExpanded(false);
    }
    addActionDemiModalFieldCancel();
    $("#exposeOverlay").fadeOut(300);
    $(document).trigger("drawArrows");
  }

  $(document).ready(function(){
    renderChangeables();

    $("#exposeOverlay").on("click", exposeOverlayClickHandler);

    $(document).keyup(function(e) {
      if (e.keyCode == 27) {
        exposeOverlayClickHandler();
        addActionDemiModalFieldCancel();
        $("#addActionDemiModal").modal("hide");
      }
    });

    var resizeTimeout = -1;
    $(window).on("resize", function () {
      window.clearTimeout(resizeTimeout);
      resizeTimeout = window.setTimeout(function () {
        renderChangeables();
      }, 200);
    });

    $(document).on("click", ".widget-main-section", function(e){
      if (! $(e.target).is("a") && ! $(e.target).is("input") && ! $(e.target).is("i") && ! $(e.target).is("button")){
        setLastExpandedWidget(ko.dataFor($(e.target).parents(".card-widget")[0]));
      }
    });

    $.jHueScrollUp();
    $(".custom-popover").popover();
  });

</script><div style="position:absolute;display:none;max-width:1000px;z-index:990" class="jHueAutocomplete popover" id="jHueHdfsAutocomplete"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p><ul class="unstyled"></ul><p></p></div></div></div>




<script type="text/javascript">
  $(document).ready(function () {
    $(document).on("info", function (e, msg) {
      $.jHueNotify.info(msg);
    });
    $(document).on("warn", function (e, msg) {
      $.jHueNotify.warn(msg);
    });
    $(document).on("error", function (e, msg) {
      $.jHueNotify.error(msg);
    });


    $(".dataTables_wrapper").jHueTableScroller();
    var resetTimeout = -1;
    var pendingRequestsInterval = -1;

    // sets feedback on every primary and danger action across Hue
    // can be disabled adding the class "disable-feedback" to the button
    $(document).on("click", ".btn-primary:not(.disable-feedback), .btn-danger:not(.disable-feedback)", function () {
      if (!$(this).hasClass('disabled')) {
        var text = ($(this).text() != "") ? $(this).text() : $(this).val();
        $(this).attr("data-loading-text", text + " ...");
        $(this).button("loading");
        startPendingRequestsPolling();
        resetTimeout = window.setTimeout(function () {
          resetPrimaryButtonsStatus();
        }, 200);
      }
    });

    $(document).on("hidden", ".modal", function () {
      resetPrimaryButtonsStatus();
    });

    $(window).unload(function () {
      window.clearInterval(pendingRequestsInterval);
      window.clearTimeout(resetTimeout);
    });

    $(document).on("submit", "form", function () {
      hasAjaxBeenSent = false;
      window.setInterval(function () {
        window.clearTimeout(resetTimeout);
      }, 10);
    });

    var hasAjaxBeenSent = false;
    $(document).ajaxSend(function () {
      hasAjaxBeenSent = true;
    });

    function startPendingRequestsPolling() {
      pendingRequestsInterval = window.setInterval(function () {
        if (hasAjaxBeenSent) {
          var activeRequests = 0;
          if (jQuery.ajax.active) {
            activeRequests = jQuery.ajax.active;
          }
          else {
            activeRequests = jQuery.active;
          }
          if (activeRequests == 0) {
            resetPrimaryButtonsStatus();
            window.clearInterval(pendingRequestsInterval);
          }
        }
        else {
          window.clearInterval(pendingRequestsInterval);
        }
      }, 200);
    }
        $.jHueTour({});
        if ($.totalStorage("jHueTourExtras") != null) {
          $.jHueTour({tours: $.totalStorage("jHueTourExtras")});
        }
        var _qs = location.search;
        if (_qs !== undefined && _qs.indexOf("tour=") > -1) {
          $.jHueTour(getParameterByName("tour"), 1);
        }
        function getParameterByName(name) {
          name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
          var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"), results = regex.exec(_qs);
          return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }
  });

  function resetPrimaryButtonsStatus() {
    $(".btn-primary:not(.disable-feedback), .btn-danger:not(.disable-feedback)").button("reset");
  }

  var _catchEnterKeyOnModals = false;

  $(".modal").on("shown", function () {
    _catchEnterKeyOnModals = true;
    // safe ux enhancement: focus on the first editable input
    $(".modal:visible").find("input:not(.disable-autofocus):visible:first").focus();
  });

  $(".modal").on("hidden", function () {
    _catchEnterKeyOnModals = false;
  });

  $(document).on("keyup", function (e) {
    var _code = (e.keyCode ? e.keyCode : e.which);
    if (_catchEnterKeyOnModals && $(".modal").is(":visible") && _code == 13) {
      var _currentModal = $(".modal:visible");
      if (_currentModal.find(".btn-primary:not(.disable-enter)").length > 0) {
        _currentModal.find(".btn-primary:not(.disable-enter)").click();
      }
      else if (_currentModal.find(".btn-danger:not(.disable-enter)").length > 0) {
        _currentModal.find(".btn-danger:not(.disable-enter)").click();
      }
    }
  });

  if (typeof nv != "undefined"){
    // hides all the nvd3 logs
    nv.log = function() {};
  }



      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-40351920-1']);

      // We collect only 2 path levels: not hostname, no IDs, no anchors...
      var _pathName = location.pathname;
      var _splits = _pathName.substr(1).split("/");
      _pathName = _splits[0] + (_splits.length > 1 && $.trim(_splits[1]) != "" ? "/" + _splits[1] : "");

      _gaq.push(['_trackPageview', '/remote/3.7.0/' + _pathName]);

      (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();

      function trackOnGA(path) {
        if (typeof _gaq != "undefined" && _gaq != null) {
          _gaq.push(['_trackPageview', '/remote/3.7.0/' + path]);
        }
      }


</script>

  

<script type="text/javascript">
$.jHueTour({
  "tours": [
    {
      "name": "thehueblog",
      "desc": "The Hue Blog",
      "path": "/",
      "video": "",
      "blog": "http://gethue.com/blog/"
    },
    {"name": "huehomedoc", "desc": "Get started!", "path": "/home", "steps": [
      {"arrowOn": ".currentApp", "expose": ".navbar-fixed-top", "title": "Your new home.", "content": "This is where you can access all your documents and you can tag them per project. Your home is always reachable from any part of Hue, just click on the house icon on the top navigator bar.", "placement": "bottom", "onShown": "", "waitForAction": false, "left": 90},
      {"arrowOn": ".sidebar-nav", "expose": ".sidebar-nav", "title": "Actions and projects", "content": "From here you can create new documents or see a specific project or any trashed document for instance.", "placement": "right", "onShown": "", "waitForAction": false},
      {"arrowOn": ".tag-header:eq(0)", "expose": ".tag-header:eq(0)", "title": "Organize!", "content": "You can organize your documents in projects and filter them out in this area. It&#39;s a smart and fast way to focus on a specific project you are currently tackling.", "placement": "right", "onShown": "", "waitForAction": false},
      {"arrowOn": ".card-home", "expose": ".card-home", "title": "Your documents", "content": "You can always have a glance at your hard work. This is the list of all your documents, The first column tells you the kind of document that is, then you can find its name, a description and some other fields.", "placement": "left", "onShown": "", "waitForAction": false, "top": "60px", "left": 40},
      {"arrowOn": ".datatables tr th:nth-child(4)", "expose": ".datatables tr td:nth-child(4)", "title": "Projects", "content": "You can assign one or more projects to a document just by clicking in this cell.", "placement": "top", "onShown": "", "waitForAction": false, "top": -20},
      {"arrowOn": ".datatables tr th:nth-child(7)", "expose": ".datatables tr td:nth-child(7)", "title": "Share your documents", "content": "You can also share a document you have worked on with a specific user or a group of users. Just click on the icon in this column on every document you want to share and choose users and groups from the popup.", "placement": "left", "onShown": "", "waitForAction": false, "top": -20},
      {"arrowOn": "#filterInput", "expose": "#filterInput", "title": "Search your documents", "content": "You can always filter out the documents by name, description or even owner. Enjoy your new home!", "placement": "left", "onShown": "", "waitForAction": false, "top": -10}
    ]
    },
    {
      "name": "hiveheaders",
      "desc": "Create Hive tables and load quoted<br/>CSV data",
      "path": "/beeswax",
      "video": "http://player.vimeo.com/video/80460405",
      "blog": "http://gethue.com/hadoop-tutorial-create-hive-tables-with-headers-and/"
    },
    {
      "name": "fbooziesubmit",
      "desc": "Submit any Oozie jobs directly<br/>from HDFS",
      "path": "/(oozie|filebrowser)",
      "video": "http://player.vimeo.com/video/80749790",
      "blog": "http://gethue.com/hadoop-tutorial-submit-any-oozie-jobs-directly-from/"
    },
    {
      "name": "zookeeper",
      "desc": "ZooKeeper Browser",
      "path": "/zookeeper",
      "video": "http://player.vimeo.com/video/79795356",
      "blog": "http://gethue.com/new-zookeeper-browser-app/"
    },
    {
      "name": "dbquery",
      "desc": "Query your Databases",
      "path": "/rdbms",
      "video": "http://player.vimeo.com/video/79020016",
      "blog": "http://gethue.com/dbquery-app-mysql-postgresql-oracle-and-sqlite-query/"
    },
    {
      "name": "searchgraph",
      "desc": "Graphical facets",
      "path": "/search",
      "video": "http://player.vimeo.com/video/78887745",
      "blog": "http://gethue.com/new-search-feature-graphical-facets/"
    },
    {
      "name": "impalasentry",
      "desc": "Use Impala with Sentry",
      "path": "/impala",
      "video": "",
      "blog": "http://gethue.com/use-the-impala-app-with-sentry-for-real-security/"
    },
    {
      "name": "ooziefb",
      "desc": "Submit Oozie jobs directly from HDFS",
      "path": "/(oozie|filebrowser)",
      "video": "http://player.vimeo.com/video/80749790",
      "blog": "http://gethue.tumblr.com/post/68781982681/hadoop-tutorial-submit-any-oozie-jobs-directly-from"
    },
    {
      "name": "jbyarn",
      "desc": "A Job Browser for Yarn",
      "path": "/jobbrowser",
      "video": "http://player.vimeo.com/video/84027054",
      "blog": "http://gethue.com/using-hadoop-mr2-and-yarn-with-an-alternative-job/"
    },
    {
      "name": "jbyarnsecurity",
      "desc": "Security with Yarn",
      "path": "/jobbrowser",
      "video": "http://player.vimeo.com/video/85922379",
      "blog": "http://gethue.com/secure-your-yarn-cluster-and-access-the-jobs/"
    },
    {
      "name": "sentry",
      "desc": "Hive Query editor with HiveServer2<br/>and Sentry",
      "path": "/(beeswax|impala)",
      "video": "http://player.vimeo.com/video/79883574",
      "blog": "http://gethue.com/hadoop-tutorial-hive-query-editor-with-hiveserver2-and/"
    },
    {
      "name": "superproxy",
      "desc": "Integrate external Web applications in<br/>any language",
      "path": "/about",
      "video": "http://player.vimeo.com/video/79178858",
      "blog": "http://gethue.com/integrate-external-web-applications-in-any-language/"
    },
    {
      "name": "season2",
      "desc": "Season 2 of Hadoop Video Tutorials",
      "path": "/",
      "video": "",
      "blog": "http://gethue.com/category/season2/"
    },
    {
      "name": "twitter",
      "desc": "Analyze Twitter data",
      "path": "/home",
      "video": "",
      "blog": "http://gethue.com/how-to-analyze-twitter-data-with-hue/"
    },
    {
      "name": "pigudf",
      "desc": "Preparing Yelp data for analysis with<br/>Pig and Python UDF",
      "path": "/(home|pig|filebrowser|metastore)",
      "video": "http://player.vimeo.com/video/73849021",
      "blog": "http://gethue.com/hadoop-tutorials-ii-1-prepare-the-data-for-analysis/"
    },
    {
      "name": "hue35",
      "desc": "What&#39;s new in Hue 3.5",
      "path": "/(about|home)",
      "video": "",
      "blog": "http://gethue.com/hue-3-5-and-its-redesign-are-out/"
    },
    {
      "name": "saml",
      "desc": "SSO with SAML",
      "path": "/(useradmin|about)",
      "video": "http://player.vimeo.com/video/76063637",
      "blog": "http://gethue.com/sso-with-hue-new-saml-backend/"
    },
    {
      "name": "ldaphowto",
      "desc": "Integrating your company with LDAP: How To",
      "path": "/(useradmin|about)",
      "video": "",
      "blog": "http://gethue.com/making-hadoop-accessible-to-your-employees-with-ldap/"
    },
    {
      "name": "sparkapp",
      "desc": "A new Spark UI",
      "path": "/(spark)",
      "video": "http://player.vimeo.com/video/78887745",
      "blog": "http://gethue.com/a-new-spark-web-ui-spark-app/"
    },
    {
      "name": "impalavshive",
      "desc": "Fast SQL with Impala",
      "path": "/impala",
      "video": "http://player.vimeo.com/video/75493693",
      "blog": "http://gethue.com/fast-sql-with-the-impala-query-editor/"
    },
    {
      "name": "pigeditor",
      "desc": "The Pig Editor",
      "path": "/pig",
      "video": "http://player.vimeo.com/video/66661052",
      "blog": "http://gethue.com/tutorial-apache-pig-editor-in-hue-2-3/"
    },
    {
      "name": "hiveudf",
      "desc": "Build and use Hive UDF in 1 minute!",
      "path": "/beeswax",
      "video": "http://player.vimeo.com/video/72200781",
      "blog": "http://gethue.com/hadoop-tutorial-hive-udf-in-1-minute/"
    },
    {
      "name": "hcatalog",
      "desc": "How to use HCatalog in Hue with Pig",
      "path": "/(metastore|pig)",
      "video": "http://player.vimeo.com/video/71024770",
      "blog": "http://gethue.com/hadoop-tutorial-how-to-access-hive-in-pig-with/"
    },
    {
      "name": "hbasebrowser",
      "desc": "HBase Browser",
      "path": "/hbase",
      "video": "http://player.vimeo.com/video/72357888",
      "blog": "http://gethue.com/the-web-ui-for-hbase-hbase-browser/"
    },
    {
      "name": "hbasetables",
      "desc": "Create HBase tables",
      "path": "/hbase",
      "video": "http://player.vimeo.com/video/72200782",
      "blog": "http://gethue.com/hadoop-tutorial-how-to-create-example-tables-in-hbase/"
    },
    {
      "name": "oozieworkflows",
      "desc": "Oozie Workflow",
      "path": "/(oozie|beeswax)",
      "video": "http://player.vimeo.com/video/73849021",
      "blog": "http://gethue.com/hadoop-tutorials-ii-2-execute-hive-queries-and/"
    },
    {
      "name": "ooziecoordinator",
      "desc": "Oozie Coordinator",
      "path": "/oozie",
      "video": "http://player.vimeo.com/video/74215175",
      "blog": "http://gethue.com/hadoop-tutorials-ii-3-schedule-hive-queries-with/"
    },
    {
      "name": "search",
      "desc": "The search app with Solr",
      "path": "/search",
      "video": "http://player.vimeo.com/video/68257054",
      "blog": "http://gethue.com/tutorial-search-hadoop-in-hue/"
    },
    {
      "name": "filebrowser",
      "desc": "HDFS File Operations Made Easy",
      "path": "/filebrowser",
      "video": "http://player.vimeo.com/video/63343487",
      "blog": "http://gethue.com/demo-hdfs-file-operations-made-easy-with-hue/"
    },
    {
      "name": "hueha",
      "desc": "High availability in Hue",
      "path": "/about",
      "video": "http://player.vimeo.com/video/71813732",
      "blog": "http://gethue.com/hadoop-tutorial-high-availability-of-hue/"
    },
    {
      "name": "hue25",
      "desc": "What&#39;s new in Hue 2.5",
      "path": "/(about|home)",
      "video": "http://player.vimeo.com/video/70955652",
      "blog": "http://gethue.com/hue-2-5-and-its-hbase-app-is-out/"
    },
    {
      "name": "hueperms",
      "desc": "Manage users and group permissions",
      "path": "/useradmin",
      "video": "",
      "blog": "http://gethue.com/how-to-manage-permissions-in-hue/"
    },
    {
      "name": "huesqoop",
      "desc": "Transfering data with Sqoop",
      "path": "/sqoop",
      "video": "http://player.vimeo.com/video/76063637",
      "blog": "http://gethue.com/move-data-in-out-your-hadoop-cluster-with-the-sqoop/"
    },
    {
      "name": "newimpala",
      "desc": "New Impala and Hive Editors",
      "path": "/(beeswax|impala)",
      "video": "http://player.vimeo.com/video/90961050",
      "blog": "http://gethue.com/hadoop-tutorial-new-impala-and-hive-editors/"
    },
    {
      "name": "oozieslas",
      "desc": "Oozie SLAs",
      "path": "/oozie",
      "video": "http://player.vimeo.com/video/90898437",
      "blog": "http://gethue.com/hadoop-tutorial-monitor-and-get-alerts-for-your-workflows-with-the-oozie-slas/"
    },
    {
      "name": "ooziecrontab",
      "desc": "The new Oozie Crontab",
      "path": "/oozie",
      "video": "http://player.vimeo.com/video/85922380",
      "blog": "http://gethue.com/hadoop-tutorial-schedule-your-hadoop-jobs-intuitively/"
    },
    {
      "name": "secureyarn",
      "desc": "Secure your YARN cluster",
      "path": "/jobbrowser",
      "video": "http://player.vimeo.com/video/85922379",
      "blog": "http://gethue.com/secure-your-yarn-cluster-and-access-the-jobs/"
    },
    {
      "name": "alternativejb",
      "desc": "MR2 and YARN alternative Job Browser",
      "path": "/jobbrowser",
      "video": "http://player.vimeo.com/video/84027054",
      "blog": "http://gethue.com/using-hadoop-mr2-and-yarn-with-an-alternative-job/"
    }
  ]
});

</script><div style="width: 1920px; height: 800px;" id="jHueTourMask"></div>

  


<a style="display: block;" href="javascript:void(0)" id="jHueScrollUpAnchor"><i class="fa fa-chevron-up"></i></a><canvas class="curved_arrow" height="62" width="25" style="position: absolute; top: 325px; left: 950px;"></canvas><canvas class="curved_arrow" height="62" width="16" style="position: absolute; top: 499px; left: 954px;"></canvas><canvas class="curved_arrow" height="62" width="16" style="position: absolute; top: 673px; left: 954px;"></canvas><canvas class="curved_arrow" height="62" width="25" style="position: absolute; top: 847px; left: 950px;"></canvas><div style="top: 157px; left: 591.5px; display: block;" class="tooltip fade top"><div class="tooltip-arrow"></div><div class="tooltip-inner">Sub workflow</div></div></body></html>